<!DOCTYPE html>






  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="keywords" content="技术博客,随笔">
<meta property="og:type" content="website">
<meta property="og:title" content="爱工作·爱生活">
<meta property="og:url" content="http://superkk.top/index.html">
<meta property="og:site_name" content="爱工作·爱生活">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="爱工作·爱生活">






  <link rel="canonical" href="http://superkk.top/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>爱工作·爱生活</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d35cf97ff8f4abe81876248566401ad5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">爱工作·爱生活</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">action456789</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/08/22/组件化模块间通信方案/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/22/组件化模块间通信方案/" itemprop="url">
                  组件化模块间通信方案
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-22 01:12:20" itemprop="dateCreated datePublished" datetime="2018-08-22T01:12:20+08:00">2018-08-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 17:07:04" itemprop="dateModified" datetime="2019-08-29T17:07:04+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/高级/" itemprop="url" rel="index"><span itemprop="name">高级</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="组件化模块间通信方案"><a href="#组件化模块间通信方案" class="headerlink" title="组件化模块间通信方案"></a>组件化模块间通信方案</h1><h3 id="1、公共模块下沉"><a href="#1、公共模块下沉" class="headerlink" title="1、公共模块下沉"></a>1、公共模块下沉</h3><p>比如一些公共的基础UI组件应该互相独立，并且可以下沉为一个单独的层（比如通用业务层），供其他业务模块调用。</p>
<h3 id="2、OpenURL统跳协议"><a href="#2、OpenURL统跳协议" class="headerlink" title="2、OpenURL统跳协议"></a>2、<code>OpenURL统跳协议</code></h3><p>用一个url表示一个页面（Controller），或者UI控件，或者任意一个类的对象。</p>
<p>需要创建一个字典，key是url，value是相应的对象，这个字典由路由类去管理，典型的方案就是<code>MGJRouter</code>。</p>
<ul>
<li><p>优点：能解决组件间的依赖，并且方案成熟，有很多知名公司都在用这种方案（蘑菇街）；</p>
</li>
<li><p>缺点：编译阶段无法发现潜在bug，并且需要去注册&amp;维护路由表。</p>
</li>
</ul>
<pre><code class="Objective-C">// 注册路由
[[Router sharedInstance] registerURL:@&quot;myapp://good/detail&quot; with:^UIViewController *{
     return [GoodDetailViewController new];
}];

// 通过url获取
UIViewController *vc = [[Router sharedInstance] openURL:@&quot;myapp://good/detail&quot;]
</code></pre>
<p><a href="https://www.jianshu.com/p/2af9c063fd85" target="_blank" rel="noopener">参考</a></p>
<h3 id="3、Target-Action-反射"><a href="#3、Target-Action-反射" class="headerlink" title="3、Target-Action(反射)"></a>3、<code>Target-Action</code>(反射)</h3><p>例如从A中push到BViewController，需要在AViewController类文件中import进BViewController，这样二者就会产生耦合<br>现在利用Target-Action机制，我们不再直接import进BViewController，而是利用<code>NSClassFromString(&lt;#NSString * _Nonnull aClassName#&gt;)</code>这个api将BViewController这个字符串反射成BViewController这个类，这样我们就可以根据反射后的类进行实例化，再调用实例化对象的各种方法。</p>
<ul>
<li>优点：相比于URL Router，Target-Action也不需要注册和内存占用。</li>
<li>缺点：编译阶段无法发现潜在的BUG，而且，开发者所创建的类和定义的方法必须要遵守Target-Action的命名规则，调用者可能会因为硬编码问题导致调用失败。</li>
</ul>
<p>第三方框架有<code>CTMediator</code>和<code>BeeHive</code>在github</p>
<h3 id="4、NSNotificationCenter"><a href="#4、NSNotificationCenter" class="headerlink" title="4、NSNotificationCenter"></a>4、<code>NSNotificationCenter</code></h3><ul>
<li>优点：简单直接。</li>
<li>缺点：遍地都是通知，如果同事间协调不好会使得代码很混乱。</li>
</ul>
<h3 id="5、依赖注入：推荐方法"><a href="#5、依赖注入：推荐方法" class="headerlink" title="5、依赖注入：推荐方法"></a>5、<code>依赖注入</code>：推荐方法</h3><p>比如业务C将自己注入中间层，业务A去中间层去获取依赖的方法和变量。</p>
<ul>
<li>实现方式：通过中间层协议实现<br>业务B遵从这个协议，实现协议的代理方法，返回与中间层商量好的一个实际对象。<br>业务A通过中间层的某个方法（与B商量），获取遵从了这个协议的实例B，将其当做一个遵从了这个协议的透明对象来使用。</li>
<li><p>编程实现：具体运用了java的<code>面向接口编程`</code>Protocol - Class<code>，即iOS的</code>面向协议编程`</p>
</li>
<li><p>优点：<br>1、接口类似代码，可以非常灵活的定义函数和回调等。</p>
</li>
<li><p>缺点：<br>1、接口定义文件需要放在一个模块以供依赖，但是这个模块不会贡献代码，所以还好。<br>2、使用较为麻烦，每各调用都需要定义一个service，并实现, 对于一些具有普适性规律的场景不太合适，比如页面统一跳转</p>
</li>
<li><p>面向接口的调用会产生依赖<br><code>`</code>Objective-C<br>// A 模块</p>
</li>
<li>(void)getSomeDataFromB {<br>  B.getSomeData();<br>}</li>
</ul>
<p>// B 模块</p>
<ul>
<li>(void)getSomeData {<br>  return self.data;<br>}<br><code>`</code></li>
</ul>
<ul>
<li>示例<br><code>ServiceBProtocol</code><pre><code class="Swift">protocol ServiceBProtocol {
  func getSomeDataFromServiceB() -&gt; String;
}
</code></pre>
</li>
</ul>
<p><code>MiddleLayer</code></p>
<pre><code class="Swift">class MiddleLayer: NSObject {
    class func findServiceB() -&gt; ServiceBProtocol {
        return ServiceB()
    }
}
</code></pre>
<p><code>ServiceB</code></p>
<pre><code class="Swift">
// 模块B
class ServiceB: NSObject {
    let serviceB_Data = &quot;ServiceB&quot;
}


extension ServiceB: ServiceBProtocol {
    func getSomeDataFromServiceB() -&gt; String {
        return self.serviceB_Data
    }
}
</code></pre>
<p><code>ServiceA</code></p>
<pre><code class="Swift">// 模块A
class ServiceA: NSObject {
    func getDataFromB() {
        print(MiddleLayer.findServiceB().getSomeDataFromServiceB())
    }
}
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/07/30/ReactiveCocoa冷热信号详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/30/ReactiveCocoa冷热信号详解/" itemprop="url">
                  ReactiveCocoa冷热信号详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-07-30 20:08:40" itemprop="dateCreated datePublished" datetime="2018-07-30T20:08:40+08:00">2018-07-30</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 17:07:04" itemprop="dateModified" datetime="2019-08-29T17:07:04+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/Rx-RAC/" itemprop="url" rel="index"><span itemprop="name">Rx & RAC</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>函数响应式编程(Functional Reactive Programming:FRP)，ReactiveCocoa 版本 2.5</p>
<h1 id="冷热信号"><a href="#冷热信号" class="headerlink" title="冷热信号"></a>冷热信号</h1><ul>
<li><p>冷信号<br>只有当你订阅的时候，它才会发布消息，<br>一对一，当有不同的订阅者，消息是重新完整发送。</p>
</li>
<li><p>热信号<br>尽管你并没有订阅事件，但是它会时刻推送，类似“直播”，错过了就不再处理。<br>可以有多个订阅者，是一对多</p>
</li>
</ul>
<h1 id="RACSignal-与RACSubject-的区别"><a href="#RACSignal-与RACSubject-的区别" class="headerlink" title="RACSignal 与RACSubject 的区别"></a><code>RACSignal</code> 与<code>RACSubject</code> 的区别</h1><ul>
<li><code>RACSignal</code>是冷信号</li>
<li><code>RACSubject</code>是热信号</li>
</ul>
<p>如下图</p>
<ul>
<li><code>signal</code></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/1120923-cba016d495b9a1b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li><code>subject</code></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/1120923-5974af889c88a7da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<ul>
<li><code>replaySubject</code></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/1120923-282c50256b5bae74.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<blockquote>
<p>Subject可以附加行为，例如<code>RACReplaySubject</code>具备为未来订阅者缓冲事件的能力。（这一点与冷信号类似，即使是在数据发送之后才订阅的，依然会收到全部消息）</p>
</blockquote>
<h1 id="冷信号示例：延时订阅，依然能收到所有信号数据"><a href="#冷信号示例：延时订阅，依然能收到所有信号数据" class="headerlink" title="冷信号示例：延时订阅，依然能收到所有信号数据"></a>冷信号示例：延时订阅，依然能收到所有信号数据</h1><pre><code>- (void)test1 {
    RACSignal *signal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
        [subscriber sendNext:@1];
        [subscriber sendNext:@2];
        [subscriber sendNext:@3];
        [subscriber sendCompleted];
        return nil;
    }];

    NSLog(@&quot;Signal was created.&quot;);
    [[RACScheduler mainThreadScheduler] afterDelay:0.1 schedule:^{
        [signal subscribeNext:^(id x) {
            NSLog(@&quot;Subscriber1 recveive: %@&quot;, x);
        }];

    }];

    [[RACScheduler mainThreadScheduler] afterDelay:1 schedule:^{
        [signal subscribeNext:^(id x) {
            NSLog(@&quot;Subscriber2 recveive: %@&quot;, x);
        }];

    }];

}

</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-419d5730a235a595.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h1 id="热信号示例：错过了订阅时机，就收不到信号数据，类似于直播"><a href="#热信号示例：错过了订阅时机，就收不到信号数据，类似于直播" class="headerlink" title="热信号示例：错过了订阅时机，就收不到信号数据，类似于直播"></a>热信号示例：错过了订阅时机，就收不到信号数据，类似于直播</h1><blockquote>
<p>冷信号会收到全部的数据，即使是在数据发送之后才订阅的</p>
</blockquote>
<pre><code>
- (void)test2 {
    RACMulticastConnection *connection = [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
        [[RACScheduler mainThreadScheduler] afterDelay:1 schedule:^{
            [subscriber sendNext:@1];
        }];

        [[RACScheduler mainThreadScheduler] afterDelay:2 schedule:^{
            [subscriber sendNext:@2];
        }];

        [[RACScheduler mainThreadScheduler] afterDelay:3 schedule:^{
            [subscriber sendNext:@3];
            [subscriber sendCompleted];
        }];

        return nil;
    }] publish];

    [connection connect];

    NSLog(@&quot;Signal was created.&quot;);

    [[RACScheduler mainThreadScheduler] afterDelay:1.1 schedule:^{
        [connection.signal subscribeNext:^(id x) {
            NSLog(@&quot;Subscriber1 recveive: %@&quot;, x);
        }];
    }];

    [[RACScheduler mainThreadScheduler] afterDelay:2.1 schedule:^{
        [connection.signal subscribeNext:^(id x) {
            NSLog(@&quot;Subscriber2 recveive: %@&quot;, x);
        }];
    }];
}

</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-5e7083e9f1760611.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h1 id="SideEffect示例：多次订阅导致信号block多次执行"><a href="#SideEffect示例：多次订阅导致信号block多次执行" class="headerlink" title="SideEffect示例：多次订阅导致信号block多次执行"></a>SideEffect示例：多次订阅导致信号block多次执行</h1><pre><code>- (void)test3 {
    // 多次订阅会多次执行
    RACSignal *requestSignal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
        NSLog(@&quot;开始请求网络数据&quot;);
        [RACScheduler.mainThreadScheduler afterDelay:1 schedule:^{
            [subscriber sendNext:@&quot;1&quot;];
        }];

        return nil;
    }];

    // 【请求数据次数 +1】
    [requestSignal subscribeNext:^(id x) {
        NSLog(@&quot;订阅者1&quot;);
    }];

    // 【请求数据次数 +1】
    [requestSignal subscribeNext:^(NSArray *x) {
        NSLog(@&quot;订阅者2&quot;);
    }];

    // 将信号转换为内容为2的信号
    RACSignal *signal1 = [requestSignal flattenMap:^RACStream *(id value) {
        return [RACSignal return:@&quot;2&quot;];
    }];

    // 将signal1信号所有错误信息转换为字符串@&quot;Error&quot;
    [signal1 catchTo:[RACSignal return:@&quot;Error&quot;]];

    // 在没有获取值之前以字符串@&quot;Loading...&quot;占位
    [signal1 startWith:@&quot;Loading...&quot;];

    // 将信号进行绑定
    // 【请求数据次数 +1】
    RAC(self.acountField, text) = signal1;

    // 订阅多个信号的任何错误，并且弹出UIAlertView
    // 【请求数据次数 +2】
    [[RACSignal merge:@[requestSignal, signal1]] subscribeError:^(NSError *error) {
        NSLog(@&quot;发生错误&quot;);
    }];
}

</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-465cde44e32e9612.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="解决方式一：使用-RACMulticastConnection把冷信号转化为热信号"><a href="#解决方式一：使用-RACMulticastConnection把冷信号转化为热信号" class="headerlink" title="解决方式一：使用 RACMulticastConnection把冷信号转化为热信号"></a>解决方式一：使用 <code>RACMulticastConnection</code>把冷信号转化为热信号</h2><pre><code>- (void)test4 {
    RACSignal *requestSignal = [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
        NSLog(@&quot;开始请求网络数据&quot;);
        [RACScheduler.mainThreadScheduler afterDelay:1 schedule:^{
            [subscriber sendNext:@&quot;1&quot;];
            [subscriber sendCompleted];
        }];
        return nil;
    }];

    RACMulticastConnection *connection = [requestSignal multicast:[RACSubject subject]];
//    RACMulticastConnection *connection = [requestSignal multicast:[RACReplaySubject subject]];
    [connection connect];

    [connection.signal subscribeNext:^(id x) {
        NSLog(@&quot;订阅者1:%@&quot;, x);
    }];

    [connection.signal subscribeNext:^(NSArray *x) {
        NSLog(@&quot;订阅者2:%@&quot;, x);
    }];

    [RACScheduler.mainThreadScheduler afterDelay:2 schedule:^{
        [connection.signal subscribeNext:^(NSArray *x) {
            NSLog(@&quot;订阅者3:%@&quot;, x);
        }];
    }];
}

</code></pre><h3 id="使用RACSubject时"><a href="#使用RACSubject时" class="headerlink" title="使用RACSubject时"></a>使用<code>RACSubject</code>时</h3><pre><code>RACMulticastConnection *connection = [requestSignal multicast:[RACSubject subject]];
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-85b4314b53586f26.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h3 id="使用RACReplaySubject时"><a href="#使用RACReplaySubject时" class="headerlink" title="使用RACReplaySubject时"></a>使用<code>RACReplaySubject</code>时</h3><pre><code>RACMulticastConnection *connection = [requestSignal multicast:[RACReplaySubject subject]];
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-4ae4c9e7dbfebe09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="解决方式二：使用-replayLazily把冷信号转化为热信号"><a href="#解决方式二：使用-replayLazily把冷信号转化为热信号" class="headerlink" title="解决方式二：使用 replayLazily把冷信号转化为热信号"></a>解决方式二：使用 <code>replayLazily</code>把冷信号转化为热信号</h2><pre><code>- (void)test5 {
    RACSignal *requestSignal = [[RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
        NSLog(@&quot;开始请求网络数据&quot;);
        [RACScheduler.mainThreadScheduler afterDelay:1 schedule:^{
            [subscriber sendNext:@&quot;1&quot;];
            [subscriber sendCompleted];
        }];

        return nil;

    }] replayLazily]; // modify here!!

    [requestSignal subscribeNext:^(id x) {
        NSLog(@&quot;订阅者1:%@&quot;, x);
    }];

    [requestSignal subscribeNext:^(NSArray *x) {
        NSLog(@&quot;订阅者2:%@&quot;, x);
    }];

    [RACScheduler.mainThreadScheduler afterDelay:2 schedule:^{
        [requestSignal subscribeNext:^(NSArray *x) {
            NSLog(@&quot;订阅者3:%@&quot;, x);
        }];
    }];
}
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-437a9f7928924eaa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="使用RACCommand把冷信号转化为热信号"><a href="#使用RACCommand把冷信号转化为热信号" class="headerlink" title="使用RACCommand把冷信号转化为热信号"></a>使用<code>RACCommand</code>把冷信号转化为热信号</h2><pre><code>
- (void)test6 {
    RACCommand *requestCommand = [[RACCommand alloc] initWithSignalBlock:^RACSignal *(id input) {
        return [RACSignal createSignal:^RACDisposable *(id&lt;RACSubscriber&gt; subscriber) {
            NSLog(@&quot;开始请求网络数据&quot;);
            [RACScheduler.mainThreadScheduler afterDelay:1 schedule:^{
                [subscriber sendNext:@&quot;1&quot;];
                [subscriber sendCompleted];
            }];

            return nil;
        }];
    }];

    RACSignal *requestSignal = [requestCommand execute:nil];

    [requestSignal subscribeNext:^(NSArray *x) {
        NSLog(@&quot;订阅者1:%@&quot;, x);
    }];

    [requestSignal subscribeNext:^(NSArray *x) {
        NSLog(@&quot;订阅者2:%@&quot;, x);
    }];

    [RACScheduler.mainThreadScheduler afterDelay:2 schedule:^{
        [requestSignal subscribeNext:^(NSArray *x) {
            NSLog(@&quot;订阅者3:%@&quot;, x);
        }];
    }];
}

</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/1120923-e1f4373d8b49a171.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>RACMulticastConnection</code>与<code>RACSubject</code>结合使用时是直播的热信号</p>
<p><code>RACCommand</code>、<code>replayLazily</code>、<code>RACReplaySubject</code>都是类似于冷信号的情况，不管何时订阅，都会收到所有数据</p>
<h1 id="ReactiveCocoa中潜在的内存泄漏与解决方案"><a href="#ReactiveCocoa中潜在的内存泄漏与解决方案" class="headerlink" title="ReactiveCocoa中潜在的内存泄漏与解决方案"></a>ReactiveCocoa中潜在的内存泄漏与解决方案</h1><ul>
<li><p><code>RACObserve</code>中潜在使用了self，要注意循环引用</p>
</li>
<li><p><code>RACSubject</code>中如果没有调用<code>sendCompleted</code>，调用map等操作将造成内存泄漏（循环引用）。RACSignal不会有这个问题</p>
</li>
</ul>
<p>代码参见<a href="http://fromwiz.com/share/s/3rEj7C20FAXK2jIwRi1uhc1v0WQKj83L7k142p7dil0ygtoZ" target="_blank" rel="noopener">https://github.com/action456789/ReactiveCocoaDemo</a></p>
<p>参考：<a href="http://tech.meituan.com/tag/ReactiveCocoa" target="_blank" rel="noopener">http://tech.meituan.com/tag/ReactiveCocoa</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/06/05/UITableView的`beginUpdates`与`endUpdates`用法详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/06/05/UITableView的`beginUpdates`与`endUpdates`用法详解/" itemprop="url">
                  UITableView的beginUpdates与endUpdates用法详解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-06-05 02:05:12" itemprop="dateCreated datePublished" datetime="2018-06-05T02:05:12+08:00">2018-06-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 22:57:40" itemprop="dateModified" datetime="2019-08-29T22:57:40+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="UITaUITableView的beginUpdates和endUpdates"><a href="#UITaUITableView的beginUpdates和endUpdates" class="headerlink" title="UITaUITableView的beginUpdates和endUpdates"></a>UITaUITableView的<code>beginUpdates</code>和<code>endUpdates</code></h1><ol>
<li>这个方法用于在调用插入，删除，选择方法时，同时有动画效果。 </li>
<li>用endUpdate能动画改变行高(触发<code>heightForRowAtIndexPath</code>回调)，而无需relaod这个cell。</li>
</ol>
<h2 id="使用场景一：点击cell，cell的高度就变高"><a href="#使用场景一：点击cell，cell的高度就变高" class="headerlink" title="使用场景一：点击cell，cell的高度就变高"></a>使用场景一：点击cell，cell的高度就变高</h2><p>Cell点击方法执行</p>
<pre><code class="Objective-C">  [tableView beginUpdates];
  [tableView endUpdates];
</code></pre>
<p>这两句代码中间没有任何其他部分，但是会触发<code>heightForRowAtIndexPath</code>回调，从而修改cell的高度</p>
<h2 id="使用场景二：有一个-TableView，现在我希望每按一次-update-按钮，就动态地在下方加两行。"><a href="#使用场景二：有一个-TableView，现在我希望每按一次-update-按钮，就动态地在下方加两行。" class="headerlink" title="使用场景二：有一个 TableView，现在我希望每按一次 update 按钮，就动态地在下方加两行。"></a>使用场景二：有一个 TableView，现在我希望每按一次 update 按钮，就动态地在下方加两行。</h2><ul>
<li>方法一：简单粗暴的做法 ，更改数据源，然后刷新一下列表</li>
</ul>
<pre><code class="Objective-C">
// tableData = [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;] 

@IBAction func update(_ sender: AnyObject) { 
    tableData.append(&quot;\(tableData.count)&quot;) 
    tableData.append(&quot;\(tableData.count)&quot;) 
    tableView.reloadData() 
}

</code></pre>
<ul>
<li>方法二</li>
</ul>
<pre><code class="Objective-C">
// tableData = [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;]

@IBAction func update(_ sender: AnyObject) {
    tableData.append(&quot;\(tableData.count)&quot;)
    tableData.append(&quot;\(tableData.count)&quot;)
    tableView.beginUpdates()

    let indexPaths = [IndexPath(row: tableData.count-2, section: 0), IndexPath(row: tableData.count-1, section: 0)]

    tableView.insertRows(at: indexPaths, with: UITableViewRowAnimation.automatic)

    tableView.endUpdates()
}
</code></pre>
<p>这里 beginUpdates 和 endUpdates 方法的作用是，将这两条语句之间的对 tableView 的 insert/delete 操作聚合起来，然后同时更新 UI。</p>
<h1 id="动态改变tableHeaderView高度"><a href="#动态改变tableHeaderView高度" class="headerlink" title="动态改变tableHeaderView高度"></a>动态改变<code>tableHeaderView</code>高度</h1><p>view 作为 tableView 的 tableHeaderView，单纯的改变 view 的 frame 是无济于事的，tableView 不会时刻适应它的高度，</p>
<p>所以，如何告诉tableView 它的 tableHeaderView 已经改变了？</p>
<pre><code class="Objective-C">headerView.frame = newFrame;
[self.tableView setTableHeaderView:headerView];
</code></pre>
<p>或者</p>
<pre><code class="Objective-C">[self.tableView beginUpdates];
[self.tableView setTableHeaderView:headerView];
[self.tableView endUpdates];
</code></pre>
<h2 id="如何检测动画在UITableView-beginUpdates-endUpdates上结束"><a href="#如何检测动画在UITableView-beginUpdates-endUpdates上结束" class="headerlink" title="如何检测动画在UITableView beginUpdates / endUpdates上结束"></a>如何检测动画在UITableView beginUpdates / endUpdates上结束</h2><pre><code class="Objective-C">
[CATransaction begin];

[CATransaction setCompletionBlock:^{
    // animation has finished
}];

[tableView beginUpdates];
// do some work
[tableView endUpdates];

[CATransaction commit];
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/RxSwift map,flatMap,flatMapLatest的区别/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/RxSwift map,flatMap,flatMapLatest的区别/" itemprop="url">
                  RxSwift map,flatMap,flatMapLatest的区别
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-30 00:19:38" itemprop="dateModified" datetime="2019-08-30T00:19:38+08:00">2019-08-30</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/iOS/Rx-RAC/" itemprop="url" rel="index"><span itemprop="name">Rx & RAC</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="map"><a href="#map" class="headerlink" title="map"></a>map</h1><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190830001857.png" alt=""></p>
<h1 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h1><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190830001915.png" alt=""></p>
<h1 id="flatMapLatest"><a href="#flatMapLatest" class="headerlink" title="flatMapLatest"></a>flatMapLatest</h1><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190830001930.png" alt=""></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/JS中的Promise, async, await/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/JS中的Promise, async, await/" itemprop="url">
                  JS中的Promise, async, await
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 23:22:19" itemprop="dateModified" datetime="2019-08-29T23:22:19+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/" itemprop="url" rel="index"><span itemprop="name">大前端</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/js/" itemprop="url" rel="index"><span itemprop="name">js</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="准备代码"><a href="#准备代码" class="headerlink" title="准备代码"></a>准备代码</h2><pre><code class="JS">//做饭
function cook() {
    console.log(&#39;开始做饭。&#39;);
    var p = new Promise(function (resolve, reject) { //做一些异步操作
        setTimeout(function () {
            resolve(&#39;鸡蛋炒饭&#39;);
            // reject(&#39;烧焦的米饭&#39;);
        }, 1000);
    });
    return p;
}

//吃饭
function eat(data) {
    console.log(&#39;开始吃饭：&#39; + data);
    var p = new Promise(function (resolve, reject) { //做一些异步操作
        setTimeout(function () {
            resolve(&#39;一块碗和一双筷子&#39;);
        }, 2000);
    });
    return p;
}

function wash(data) {
    console.log(&#39;开始洗碗：&#39; + data);
    var p = new Promise(function (resolve, reject) { //做一些异步操作
        setTimeout(function () {
            resolve(&#39;干净的碗筷&#39;);
        }, 2000);
    });
    return p;
}
</code></pre>
<pre><code class="JS">//切菜
function cutUp() {
    var p = new Promise(function (resolve, reject) { //做一些异步操作
        setTimeout(function () {
            resolve(&#39;切好的菜&#39;);
        }, 1000);
    });
    return p;
}

//烧水
function boil() {
    var p = new Promise(function (resolve, reject) { //做一些异步操作
        setTimeout(function () {
            resolve(&#39;烧好的水&#39;);
        }, 2000);
    });
    return p;
}
</code></pre>
<h2 id="async-await：解决Promise只是减少了嵌套，并不能完全消除嵌套的问题"><a href="#async-await：解决Promise只是减少了嵌套，并不能完全消除嵌套的问题" class="headerlink" title="async/await：解决Promise只是减少了嵌套，并不能完全消除嵌套的问题"></a>async/await：解决Promise只是减少了嵌套，并不能完全消除嵌套的问题</h2><h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><ul>
<li>当调用一个 async 函数时，会返回一个 Promise 对象</li>
<li>当这个 async 函数返回一个值时，Promise 的 resolve 方法会负责传递这个值；</li>
<li>当 async 函数抛出异常时，Promise 的 reject 方法也会传递这个异常值。<ul>
<li>当async 函数没有返回值，它会返回 Promise.resolve()。</li>
</ul>
</li>
</ul>
<h4 id="await"><a href="#await" class="headerlink" title="await"></a>await</h4><ul>
<li>await 表达式会暂停当前 async function 的执行，等待 Promise 处理完成。</li>
<li>await后面调用的函数需要返回一个promise</li>
<li><p>await 必须出现在 async 函数内部，不能单独使用。</p>
</li>
<li><p>若 Promise 正常处理(fulfilled)，其回调的resolve函数参数作为 await 表达式的值，继续执行async function。</p>
</li>
<li>若 Promise 处理异常(rejected)，await 表达式会把 Promise 的异常原因抛出。</li>
<li>若 await 操作符后的表达式的值不是一个 Promise，则返回该值本身。</li>
</ul>
<h2 id="一-then-：多个异步事件串行执行"><a href="#一-then-：多个异步事件串行执行" class="headerlink" title="一. then()：多个异步事件串行执行"></a>一. <code>then()</code>：多个异步事件串行执行</h2><p>类似于RxSwift中<code>flatMap</code></p>
<h4 id="写法一"><a href="#写法一" class="headerlink" title="写法一"></a>写法一</h4><pre><code class="JS">cook()
    .then(data =&gt; {
        return eat(data);
    })
    .then(data =&gt; {
        return wash(data);
    })
    .then(data =&gt; {
        console.log(data);
    });
</code></pre>
<h4 id="写法二：-简化的写法"><a href="#写法二：-简化的写法" class="headerlink" title="写法二： 简化的写法"></a>写法二： 简化的写法</h4><pre><code>// 简化的写法
cook()
    .then(eat)
    .then(wash)
    .then((data) =&gt; {
        console.log(data);
    })
    .catch(err=&gt;{
        console.log(err);
    });
</code></pre><h4 id="抛出异常"><a href="#抛出异常" class="headerlink" title="抛出异常"></a>抛出异常</h4><pre><code>// 抛出异常
cook()
    .then(data =&gt; {
        throw new Error(&#39;米饭被打翻了！&#39;);
        eat(data);
    })
    .then(wash)
    .then((data) =&gt; {
        console.log(data);
    })
    .catch(err =&gt; {
        console.log(err);
    });
</code></pre><h4 id="写法三：使用async-await"><a href="#写法三：使用async-await" class="headerlink" title="写法三：使用async/await"></a>写法三：使用async/await</h4><pre><code class="js">async function flatMap() {
    try {
        let cookResult = await cook();
        let eatResult = await eat();
        let washResult = await wash();
        console.log(`async await flatMap test: ${cookResult},${eatResult},${washResult}~~~~~`);
    } catch (err) {
        console.log(`error: ${err}`);
    }
}
flatMap() // async await flatMap test: 鸡蛋炒饭,一块碗和一双筷子,干净的碗筷~~~~~
</code></pre>
<h2 id="二-all-多个异步事件并行执行，全部执行完毕后再执行then回调"><a href="#二-all-多个异步事件并行执行，全部执行完毕后再执行then回调" class="headerlink" title="二. all(): 多个异步事件并行执行，全部执行完毕后再执行then回调"></a>二. <code>all()</code>: 多个异步事件并行执行，全部执行完毕后再执行then回调</h2><p>类似于RxSwift中<code>zip</code></p>
<h4 id="方式一：Promise"><a href="#方式一：Promise" class="headerlink" title="方式一：Promise"></a>方式一：Promise</h4><pre><code class="JS">Promise
    .all([cutUp(), boil()])
    .then(results =&gt; {
        console.log(results);
    });
</code></pre>
<h4 id="方式二：使用async-await"><a href="#方式二：使用async-await" class="headerlink" title="方式二：使用async await"></a>方式二：使用async await</h4><pre><code class="js">async function zip() {
    try {
        let results = await Promise.all([cutUp(), boil()]);
        console.log(`async await zip test ${results}`)
    } catch (err) {
        console.log(`error: ${err}`);
    }
}

zip() // async await zip test 切好的菜,烧好的水
</code></pre>
<h2 id="三-race-多个异步事件同时执行，只要有一个执行完毕立即执行then回调"><a href="#三-race-多个异步事件同时执行，只要有一个执行完毕立即执行then回调" class="headerlink" title="三. race(): 多个异步事件同时执行，只要有一个执行完毕立即执行then回调"></a>三. <code>race()</code>: 多个异步事件同时执行，只要有一个执行完毕立即执行then回调</h2><h4 id="方式一：Promise-1"><a href="#方式一：Promise-1" class="headerlink" title="方式一：Promise"></a>方式一：Promise</h4><pre><code class="JS">Promise
    .race([cutUp(), boil()])
    .then(results =&gt; {
        console.log(results);
    });
</code></pre>
<h4 id="方式二：使用async-await-1"><a href="#方式二：使用async-await-1" class="headerlink" title="方式二：使用async await"></a>方式二：使用async await</h4><pre><code class="JS">async function race() {
    try {
        let results = await Promise.race([cutUp(), boil()]);
        console.log(`async await race test ${results}`)
    } catch (err) {
        console.log(`error: ${err}`);
    }
}

race() //async await race test 切好的菜
</code></pre>
<ul>
<li>应用：为异步操作设置超时时间</li>
</ul>
<pre><code class="JS">//请求某个图片资源
function requestImg(){
    var p = new Promise(function(resolve, reject){
    var img = new Image();
    img.onload = function(){
       resolve(img);
    }
    img.src = &#39;xxxxxx&#39;;
    });
    return p;
}

//延时函数，用于给请求计时
function timeout(){
    var p = new Promise(function(resolve, reject){
        setTimeout(function(){
            reject(&#39;图片请求超时&#39;);
        }, 5000);
    });
    return p;
}

Promise
.race([requestImg(), timeout()])
.then(function(results){
    console.log(results);
})
.catch(function(reason){
    console.log(reason);
});
</code></pre>
<p>参考：<a href="https://www.cnblogs.com/sweeeper/p/8442613.html" target="_blank" rel="noopener">https://www.cnblogs.com/sweeeper/p/8442613.html</a><br><a href="https://segmentfault.com/a/1190000011526612?utm_source=tag-newest" target="_blank" rel="noopener">https://segmentfault.com/a/1190000011526612?utm_source=tag-newest</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/JS常用点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/JS常用点/" itemprop="url">
                  JS常用点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 23:08:41" itemprop="dateModified" datetime="2019-08-29T23:08:41+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/" itemprop="url" rel="index"><span itemprop="name">大前端</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/js/" itemprop="url" rel="index"><span itemprop="name">js</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><h3 id="for-of：遍历数组value"><a href="#for-of：遍历数组value" class="headerlink" title="for of：遍历数组value"></a><code>for of</code>：遍历数组value</h3><blockquote>
<p>TIPS: for of 断点时，获取不到变量信息</p>
<pre><code class="javascript">const array = [
    {
        name: &quot;张三&quot;
    }, {
        name: &quot;李四&quot;
    }, {
        name: &quot;王五&quot;
    }, {
        name: &quot;小红&quot;
    }];
let obj = {
    name: &quot;小红&quot;,
    age: 19,
    sex: &#39;女&#39;,
}
// for of：遍历数组value
for (const item of array) {
    console.log(item.name);
}
</code></pre>
</blockquote>
<p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829222714.png" alt=""></p>
<h3 id="for-in：遍历对象key"><a href="#for-in：遍历对象key" class="headerlink" title="for in：遍历对象key"></a><code>for in</code>：遍历对象key</h3><pre><code class="javascript">// for in：遍历对象key
for (const key in obj) {
    console.log(`${key}:${obj[key]}`);
}
</code></pre>
<p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829222733.png" alt=""></p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a><code>map</code></h3><pre><code class="javascript">let nArray = array.map((value, index) =&gt; {
    return { ...value, type: &#39;哈哈&#39; }
})
console.log(nArray);
</code></pre>
<h3 id="切片：splice"><a href="#切片：splice" class="headerlink" title="切片：splice"></a>切片：<code>splice</code></h3><pre><code>- [start, end) 从下标start开始，到下标end结束，不包括end
- end 大于数组长度会截取到数组结束
</code></pre><pre><code>let subArray = array.splice(0, 6)
console.log(subArray)
</code></pre><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829222753.png" alt=""></p>
<h1 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h1><p>本质是<code>模式匹配</code></p>
<h2 id="数组-1"><a href="#数组-1" class="headerlink" title="数组"></a>数组</h2><ul>
<li><p>本质：实现了Iterator 接口的对象就可以按顺序解构赋值<br>数组的元素是按次序排列的，变量的取值由它的位置决定</p>
<pre><code class="javascript">let [a, [b], d] = [1, [2, 3], 4];
a // 1
b // 2
d // 4
</code></pre>
</li>
<li><p>默认值</p>
<pre><code class="javascript">let [x = 1, y = x] = [2];    // x=2; y=2
let [foo = true] = [];
foo // true
let [x = 1] = [undefined];
x // 1
</code></pre>
</li>
</ul>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><h3 id="变量与属性同名"><a href="#变量与属性同名" class="headerlink" title="变量与属性同名"></a>变量与属性同名</h3><ul>
<li>字符串赋值<pre><code class="javascript">let { bar, foo, hello } = { foo: &#39;aaa&#39;, bar: &#39;bbb&#39; };
foo // &quot;aaa&quot;
bar // &quot;bbb&quot;
hello // &quot;undefined&quot;
</code></pre>
</li>
<li>对象方法赋值<pre><code class="javascript">const { log } = console;
log(&#39;hello&#39;) // hello
</code></pre>
<h3 id="变量名与属性名不同名"><a href="#变量名与属性名不同名" class="headerlink" title="变量名与属性名不同名"></a>变量名与属性名不同名</h3><pre><code class="javascript">let { foo: baz } = { foo: &#39;aaa&#39;, bar: &#39;bbb&#39; };
baz // &quot;aaa&quot;
</code></pre>
对象的解构赋值的内部机制，是先找到同名属性，然后再赋给对应的变量。真正被赋值的是后者，而不是前者</li>
</ul>
<h3 id="嵌套对象赋值"><a href="#嵌套对象赋值" class="headerlink" title="嵌套对象赋值"></a>嵌套对象赋值</h3><ul>
<li>注意，对象嵌套赋值里，<code>冒号:</code>代表模式，并不是取值</li>
</ul>
<pre><code class="javascript">const node = {
    loc: {
      start: {
        line: 1,
        column: 5
      }
    }
  };
let { loc: { start }} = node;
start // Object {line: 1, column: 5}
loc // undefined

let { loc, loc: { start }}
start // Object {line: 1, column: 5}
loc // Object {start: Object}

let { loc: { start: { line }}} = node;
line // 1
loc // undefined
start // undefined
</code></pre>
<h3 id="获取对象继承的属性"><a href="#获取对象继承的属性" class="headerlink" title="获取对象继承的属性"></a>获取对象继承的属性</h3><pre><code class="javascript">const obj1 = {};
const obj2 = { foo: &#39;bar&#39; };
Object.setPrototypeOf(obj1, obj2);

const { foo } = obj1;
foo // &quot;bar&quot;

</code></pre>
<h3 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h3><pre><code class="javascript">var {x = 3} = {};
x // 3

var {x = 3} = {x: undefined};
x // 3

</code></pre>
<h3 id="已声明变量的解构赋值"><a href="#已声明变量的解构赋值" class="headerlink" title="已声明变量的解构赋值"></a>已声明变量的解构赋值</h3><ul>
<li>错误的写法</li>
</ul>
<pre><code class="javascript">let x;
{x} = {x: 1};
// SyntaxError: syntax error

</code></pre>
<ul>
<li>正确的写法</li>
</ul>
<pre><code class="javascript">let x;
({x} = {x: 1});
</code></pre>
<h3 id="函数参数的解构赋值"><a href="#函数参数的解构赋值" class="headerlink" title="函数参数的解构赋值"></a>函数参数的解构赋值</h3><p>函数add的参数表面上是一个数组，但在传入参数的那一刻，数组参数就被解构成变量x和y。对于函数内部的代码来说，它们能感受到的参数就是x和y。</p>
<pre><code class="javascript">function add([x, y]){
  return x + y;
}

add([1, 2]); // 3
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/Jenkins安装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/Jenkins安装/" itemprop="url">
                  MacOS安装Jenkins
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 23:10:23" itemprop="dateModified" datetime="2019-08-29T23:10:23+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/工具/" itemprop="url" rel="index"><span itemprop="name">工具</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="文档建议只看两处，蒲公英和fastlane的"><a href="#文档建议只看两处，蒲公英和fastlane的" class="headerlink" title="文档建议只看两处，蒲公英和fastlane的"></a>文档建议只看两处，蒲公英和fastlane的</h1><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><ul>
<li>启动<br><code>sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist</code></li>
<li>关闭<br><code>sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist</code></li>
</ul>
<h1 id="解决无法安装插件问题"><a href="#解决无法安装插件问题" class="headerlink" title="解决无法安装插件问题"></a>解决无法安装插件问题</h1><ol>
<li>第一步：<code>插件管理 -&gt; Advanced -&gt; Update Site</code>中，将https改为http</li>
<li>第二部：重启jenkins服务</li>
</ol>
<p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225004.png" alt=""><br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225013.png" alt=""></p>
<h1 id="权限问题导致无法执行脚本"><a href="#权限问题导致无法执行脚本" class="headerlink" title="权限问题导致无法执行脚本"></a>权限问题导致无法执行脚本</h1><p>有两种解决办法：</p>
<h2 id="方法一：设置用户权限（不推荐）"><a href="#方法一：设置用户权限（不推荐）" class="headerlink" title="方法一：设置用户权限（不推荐）"></a>方法一：设置用户权限（不推荐）</h2><p><strong>这样设置后依然会存在其他的一系列问题，例如执行fastlane脚本报错 </strong></p>
<p>一般情况下，使用jenkins官网下载的安装包安装会出现这个问题。</p>
<p>在官网下载dmg安装包，安装完毕即可在本机搭建jenkins的工作。但是jenkins不会用本地的用户去构建，任何创建的文件都是“jenkins”用户所有，这会造成很多权限问题，无法调用自己写的脚本，执行shell会出现没有权限的错误。</p>
<ul>
<li>解决办法：修改jenkins用户群组和用户</li>
<li>第一步：查看自己的群组和用户名称： </li>
</ul>
<p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225032.png" alt=""><br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225044.png" alt=""></p>
<ul>
<li>第二步：更改 Jenkins 用户群组和用户名称</li>
</ul>
<pre><code class="javascript">//停止Jenkins
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist

// 修改group 和user
sudo vim +1 +/daemon +’s/daemon/staff/’ +/daemon +’s/daemon/ks’ +wq org.jenkins-ci.plist
sudo chown -R ks:staff /Users/Shared/Jenkins/

// 开始Jenkins
sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist
</code></pre>
<p>或者你也可以手动修改 org.jenkins-ci.plist 文件中的内容<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225107.png" alt=""></p>
<ul>
<li>第三步：若无法打开jenkins，需要修改下权限</li>
</ul>
<pre><code class="script">$ sudo chown -R userName /Users/Shared/Jenkins
$ sudo chown -R userName /var/log/jenkins
#重启Jenkins
$ sudo launchctl load /Library/LaunchDaemons/org.jenkins-ci.plist
</code></pre>
<ul>
<li>WARING: Jenkins更改工作空间会导致原来的数据全部丢失<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225126.png" alt=""><br>参考：<a href="https://www.cnblogs.com/ihojin/p/jenkins-permission.html" target="_blank" rel="noopener">https://www.cnblogs.com/ihojin/p/jenkins-permission.html</a></li>
</ul>
<h2 id="方法二：使用gem重新安装jenkins（推荐）"><a href="#方法二：使用gem重新安装jenkins（推荐）" class="headerlink" title="方法二：使用gem重新安装jenkins（推荐）"></a>方法二：使用gem重新安装jenkins（推荐）</h2><ul>
<li>卸载使用安装包安装的jenkins</li>
</ul>
<pre><code>//进入以下目录，双击运行
/Library/Application Support/Jenkins/Uninstall.command
//也可以这样运行
sh &quot;/Library/Application Support/Jenkins/Uninstall.command&quot;

//删除配置，这个可选
sudo rm -rf /var/root/.jenkins ~/.jenkins
sudo launchctl unload /Library/LaunchDaemons/org.jenkins-ci.plist
sudo rm /Library/LaunchDaemons/org.jenkins-ci.plist
sudo rm -rf /Applications/Jenkins &quot;/Library/Application Support/Jenkins&quot; /Library/Documentation/Jenkins
sudo rm -rf /Users/Shared/Jenkins
sudo dscl . -delete /Users/jenkins
sudo dscl . -delete /Groups/jenkins
sudo rm -f /etc/newsyslog.d/jenkins.conf
pkgutil --pkgs | grep &#39;org\.jenkins-ci\.&#39; | xargs -n 1 sudo pkgutil --forget

//如果使用brew安装的，可以执行以下命令
brew uninstall jenkins
</code></pre><ul>
<li>安装</li>
</ul>
<pre><code>brew update &amp;&amp; brew install jenkins
</code></pre><ul>
<li>启动</li>
</ul>
<pre><code>jenkins
</code></pre><p>参考：<a href="https://docs.fastlane.tools/best-practices/continuous-integration/jenkins/" target="_blank" rel="noopener">https://docs.fastlane.tools/best-practices/continuous-integration/jenkins/</a></p>
<p><br></p>
<h1 id="Jenkins如何使用本地git仓库"><a href="#Jenkins如何使用本地git仓库" class="headerlink" title="Jenkins如何使用本地git仓库"></a>Jenkins如何使用本地git仓库</h1><p>git地址填写为本地文件路径即可<br><code>file:///home/rbkcbeqc/dev/git/gitsandbox.</code><br>参考：<a href="https://stackoverflow.com/questions/10498554/jenkins-linking-to-my-local-git-repository" target="_blank" rel="noopener">https://stackoverflow.com/questions/10498554/jenkins-linking-to-my-local-git-repository</a></p>
<h1 id="全局变量如何使用"><a href="#全局变量如何使用" class="headerlink" title="全局变量如何使用"></a>全局变量如何使用</h1><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225149.png" alt=""><br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829225218.png" alt=""></p>
<p>这里自己添加的变量可以在shell脚本中直接使用。</p>
<pre><code class="sh">echo $TOKEN_SIT
</code></pre>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/快捷键/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/快捷键/" itemprop="url">
                  快捷键
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 22:57:04" itemprop="dateModified" datetime="2019-08-29T22:57:04+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/工具/" itemprop="url" rel="index"><span itemprop="name">工具</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Webstrom-IDEA-快捷键"><a href="#Webstrom-IDEA-快捷键" class="headerlink" title="Webstrom/IDEA 快捷键"></a>Webstrom/IDEA 快捷键</h1><ul>
<li><code>双击 Shift / cmd + shift + A</code>：全局搜索</li>
<li><code>cmd + B</code>: 跳到变量申明处</li>
<li><code>cmd + iption + B</code>: 跳转接口实现类</li>
<li><code>ctrl + F12</code>: 可以显示当前文件的结构</li>
<li><code>ctrl + D</code>: 行复制</li>
<li><code>cmd + Home/End</code>：跳到文件头/尾</li>
<li><code>cmd + K</code>: 代码补全 </li>
<li><code>cmd + option + T</code>：用 if, else, try, catch, for 等来围绕选中的代码块</li>
<li><code>cmd + N / ctrl + 回车</code>：打开代码生成菜单</li>
<li><code>cmd + P</code>：显示方法具体信息</li>
<li><code>ctrl + J</code>：查看方法文档</li>
<li><code>cmd + E</code>：显示打开的文件历史记录</li>
<li><code>cmd + U</code>：进入父类</li>
<li><code>cmd + ⬆️/⬇️</code>：进入上一个/下一个方法</li>
<li><code>cmd  + shift + T</code>：查看类、属性列表</li>
<li><code>option+ F7</code>：全局找到自己被使用的地方</li>
<li><code>cmd + F7</code>：在当前文件找到自己被使用的地方</li>
<li><code>cmd + PgUp / PgDn</code>：左右tab切换</li>
<li><code>cmd +W</code>：关闭当前tab</li>
<li><code>cmd + option + U</code>：显示类/接口的依赖关系UML图</li>
<li><code>cmd + option + V</code>：自动生成返回值</li>
<li><code>cmd + F9</code>：编译（idea热部署）</li>
<li><p><code>option + shift +  ⬆️/⬇️</code>： 移动行</p>
</li>
<li><p>自动import</p>
<ul>
<li><code>ctrl+option+O</code>：删除未使用的引用</li>
</ul>
</li>
<li><p>多光标操作</p>
<ul>
<li><code>ctrl+G</code>：选中出现的单词并添加光标（Windows上为<code>Alt + J</code>）</li>
<li><code>ctrl+shift+G</code>：取消选中出现的单词（Windows上的Alt + Shift + J）</li>
<li><code>option+shift+鼠标左键单机</code>：在单击处添加光标</li>
<li><code>option+鼠标拖动</code>：在选中处添加光标</li>
</ul>
</li>
<li><p>选中操作</p>
<ul>
<li><code>option+ ⬆️/⬇️</code>：增加选中范围 / 减少选中范围</li>
<li><code>cmd+option+M</code>：使用选中代码段生成函数</li>
<li><code>cmd+option+T</code>：使用try catch等包围代码段</li>
</ul>
</li>
</ul>
<p><a href="https://blog.jetbrains.com/phpstorm/2014/03/working-with-multiple-selection-in-phpstorm-8-eap/" target="_blank" rel="noopener">https://blog.jetbrains.com/phpstorm/2014/03/working-with-multiple-selection-in-phpstorm-8-eap/</a></p>
<h1 id="android模拟器快捷键"><a href="#android模拟器快捷键" class="headerlink" title="android模拟器快捷键"></a>android模拟器快捷键</h1><ul>
<li><code>cmd + m</code> 显示开发者菜单</li>
<li><code>R + R</code> reload</li>
</ul>
<h1 id="iOS模拟器快捷键"><a href="#iOS模拟器快捷键" class="headerlink" title="iOS模拟器快捷键"></a>iOS模拟器快捷键</h1><ul>
<li><code>cmd + d</code>/<code>ctrl+command+z</code> 显示开发者菜单</li>
<li><code>cmd + r</code> reload<br>单使用模拟器软键盘时，<code>cmd+r</code>/<code>cmd+d</code>可能失效，此时使用<code>ctrl+command+z</code>即可<br>或者：<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829224617.png" alt=""><h2 id="React-Native-命令"><a href="#React-Native-命令" class="headerlink" title="React Native 命令"></a>React Native 命令</h2><code>react-native start</code>：启动react native服务器<br>在特定模拟器上启动<br><code>react-native run-ios --simulator &quot;iPhone 7 Plus”</code><h1 id="VSCode快捷键"><a href="#VSCode快捷键" class="headerlink" title="VSCode快捷键"></a>VSCode快捷键</h1><h2 id="JSON-格式化"><a href="#JSON-格式化" class="headerlink" title="JSON 格式化"></a>JSON 格式化</h2></li>
</ul>
<p>安装插件<code>JSON Tools</code></p>
<p><a href="https://marketplace.visualstudio.com/items?itemName=eriklynd.json-tools" target="_blank" rel="noopener">https://marketplace.visualstudio.com/items?itemName=eriklynd.json-tools</a></p>
<p><code>Ctrl(Cmd)+Alt+M</code> for JSON pretty.</p>
<p><code>Alt+M</code> for JSON minify.</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p><code>Cmd + Shift + p</code>打开命令面板</p>
<p><code>Cmd+T</code>跳转到关键字（全局搜索变量或者函数）</p>
<p><code>Option + Cmd + ⬅️/➡️</code> 不同tab间切换</p>
<p><code>Ctrl + -</code> 前进（跳转到函数之后跳转回之前的位置）</p>
<p><code>Ctrl + Shift + -</code> 后退</p>
<p><code>ctrl + shift + y</code>打开/关闭Debug Console</p>
<p><code>Ctrl + ~</code> 打开/关闭终端（注意要在英文输入状态下，英文状态下是ctrl + ·导致无效）</p>
<p><code>Cmd+1</code>显示/隐藏侧边栏</p>
<p><code>Shift+cmd+k</code>删除当前行</p>
<p><code>Ctrl + G</code> 转到行</p>
<p><code>Ctrl + P</code> 转到文件</p>
<p><code>Ctrl + Shift + O</code> 跳转到关键字（文件内搜索变量或者函数）</p>
<p><code>Shift+Option+ ↑ / ↓</code> 移动当前行到上一行/下一行</p>
<p><code>Cmd+E</code>打开最近项目目录</p>
<ul>
<li>多光标操作</li>
</ul>
<p><code>cmd+shift+L</code>添加光标到所有出现的单词处，并选中</p>
<p><code>cmd+g</code>与<code>cmd+shift+L</code>配合可以在选中的单词间跳转</p>
<h1 id="微信小程序编辑器快捷键"><a href="#微信小程序编辑器快捷键" class="headerlink" title="微信小程序编辑器快捷键"></a>微信小程序编辑器快捷键</h1><h2 id="windows-下"><a href="#windows-下" class="headerlink" title="windows 下"></a>windows 下</h2><p><code>ctrl+p</code> 快速查找文件<br><code>ctrl+e</code> 快速查找最近打开过的文件</p>
<h1 id="eclipse快捷键"><a href="#eclipse快捷键" class="headerlink" title="eclipse快捷键"></a>eclipse快捷键</h1><p>选中代码，ctrl + 1，打开列表<br>反撤销，ctrl + y</p>
<h1 id="vim快捷键"><a href="#vim快捷键" class="headerlink" title="vim快捷键"></a>vim快捷键</h1><ul>
<li>撤销: 退出编辑模式，然后快速输入 u 两次 </li>
<li>反撤销:    退出编辑模式，然后快速输入 ctrl + r 两次</li>
<li>粘贴:p</li>
</ul>
<h1 id="Xcode快捷键"><a href="#Xcode快捷键" class="headerlink" title="Xcode快捷键"></a>Xcode快捷键</h1><p>| 快捷键 | 说明 |</p>
<p>|:-|:-|</p>
<p>| Command + Shift + O | 快速查找文件/文件夹 |</p>
<p>| Ctrl + 6 | 在类中快速查查找方法 |</p>
<p>| Ctrl + 2| 显示最近的浏览记录|</p>
<p>| Command + Shift + j  | 显示当前文件，在导航拦中的位置 |</p>
<p>|option + cmd + 回车| 打开辅助视图 |</p>
<p>|cmd + 回车 | 取消辅助视图 |</p>
<p>| option（即windows下Alt键） + Cmd + 0 | 关闭Xcode右边的窗口 |</p>
<p>| Cmd + 上方向键/下方向键 | 跳到代码开头/结尾 |</p>
<p>| Control + Cmd + 方向键 | 在.h和.m间切换 |</p>
<p>| cmd + 0 | 打开或者取消左边的导航栏 |</p>
<p>| option + cmd 0 | 打开或者取消右边的属性视图 |</p>
<p>| Control + I | 重新缩进代码 |</p>
<p>| Control + Cmd + E | 统一修改变量名 |</p>
<p>| <code>Command + [</code> 或 <code>Command +  ]</code> | 左移/右移代码块 |</p>
<p>| <code>Option + Command + [</code> 或 <code>Option + Command + ]</code> | 上移/下移代码 |</p>
<p>| Command + Shift + 左/右方向键 | 选中当前行 |</p>
<p>| Control + D | 删除光标右边的字符，相当与 windows 下的 Delete |</p>
<p>| Command + Alt + ⬅️／➡️ | 折叠展开代码段 |</p>
<p>| Command + L | 跳转到指定行 |</p>
<p>| Command + option + / | 添加标准注释 |</p>
<p>大小写转换<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829224804.png" alt=""></p>
<h2 id="storyBoard-快捷键"><a href="#storyBoard-快捷键" class="headerlink" title="storyBoard 快捷键"></a>storyBoard 快捷键</h2><ol>
<li>Command + Shift + _ / | 在                 storyBoard 上添加辅助线</li>
<li>Command + Shift + 鼠标右键             选中某个 View</li>
<li>使用键盘移动控件</li>
</ol>
<p>第一步：使用鼠标选中某个控件<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829224821.png" alt=""><br>第二步：使用<code>方向键</code>进行移动，按住<code>shift键 + 方向键</code>可以更快的移动</p>
<ol start="4">
<li>多个控件层叠时选择某个控件<br><code>鼠标右键+shift</code></li>
</ol>
<h2 id="模拟器快捷键"><a href="#模拟器快捷键" class="headerlink" title="模拟器快捷键"></a>模拟器快捷键</h2><ul>
<li><p><code>Cmd + shift + H</code>回到桌面</p>
</li>
<li><p>按住<code>Ctrl + Shift</code> 点击控件，显示这个点上的所有控件</p>
</li>
</ul>
<p>⌥代表option键</p>
<h1 id="Mac-快捷键"><a href="#Mac-快捷键" class="headerlink" title="Mac 快捷键"></a>Mac 快捷键</h1><ul>
<li><p>全屏截图：Command-Shift-3</p>
</li>
<li><p>指定区域截图：Command-Shift-4</p>
</li>
<li><p>显示隐藏快捷键：Command+Shift+.</p>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/React-Native Tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/React-Native Tips/" itemprop="url">
                  React-Native Tips
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 22:25:52" itemprop="dateModified" datetime="2019-08-29T22:25:52+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/" itemprop="url" rel="index"><span itemprop="name">大前端</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/React-Native/" itemprop="url" rel="index"><span itemprop="name">React-Native</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="快速进入断点"><a href="#快速进入断点" class="headerlink" title="快速进入断点"></a>快速进入断点</h1><ol>
<li>模拟器开启远程调试</li>
<li>在浏览器上<code>cmd+option+I</code>打开调试页面</li>
<li>代码输入<code>dubugger</code>进入断点<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829211638.png" alt=""><br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829211651.png" alt=""></li>
</ol>
<h1 id="更新node"><a href="#更新node" class="headerlink" title="更新node"></a>更新node</h1><ul>
<li>1、更新npm<br><code>npm -v</code><br><code>npm install npm@latest -g</code></li>
<li>2、更新node<pre><code>sudo npm cache clean -f
sudo npm install -g n
sudo n stable
</code></pre></li>
</ul>
<p>参考：<a href="https://www.hostingadvice.com/how-to/update-node-js-latest-version/" target="_blank" rel="noopener">https://www.hostingadvice.com/how-to/update-node-js-latest-version/</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://superkk.top/2018/05/21/React-Native 布局/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="action456789">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="爱工作·爱生活">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/21/React-Native 布局/" itemprop="url">
                  React-Native布局
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-05-21 18:01:12" itemprop="dateCreated datePublished" datetime="2018-05-21T18:01:12+08:00">2018-05-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-08-29 22:25:25" itemprop="dateModified" datetime="2019-08-29T22:25:25+08:00">2019-08-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/" itemprop="url" rel="index"><span itemprop="name">大前端</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/大前端/React-Native/" itemprop="url" rel="index"><span itemprop="name">React-Native</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://facebook.github.io/react-native/docs/flexbox" target="_blank" rel="noopener">https://facebook.github.io/react-native/docs/flexbox</a><br><a href="https://yogalayout.com/playground" target="_blank" rel="noopener">https://yogalayout.com/playground</a></p>
<h1 id="颜色字符串"><a href="#颜色字符串" class="headerlink" title="颜色字符串"></a>颜色字符串</h1><p>backgroundColor: ‘#30576EA0’,<br>前面两位（30）表示透明度，范围是0～99</p>
<h1 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h1><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829215932.png" alt=""><br> 边框属性(border)用来设定一个元素的边线。</p>
<ul>
<li>边距属性(margin)是用来设置一个元素所占空间的边缘到相邻元素之间的距离。</li>
<li>间隙属性(padding)是用来设置元素内容到元素边界的距离。</li>
</ul>
<p><br></p>
<h1 id="Flexbox布局属性"><a href="#Flexbox布局属性" class="headerlink" title="Flexbox布局属性"></a>Flexbox布局属性</h1><h2 id="伸缩容器的属性"><a href="#伸缩容器的属性" class="headerlink" title="伸缩容器的属性"></a>伸缩容器的属性</h2><h3 id="主轴"><a href="#主轴" class="headerlink" title="主轴"></a>主轴</h3><ul>
<li><p><code>flexDirection</code>  ：决定布局的主轴，默认值是竖直轴(column)</p>
<ul>
<li><code>row</code>:（默认值）</li>
<li><code>row-reverse</code></li>
<li><code>column</code> (RN默认值)</li>
<li><code>column-reverse</code></li>
</ul>
</li>
<li><p><code>justifyContent</code> ：决定其子元素沿着主轴的排列方式</p>
<ul>
<li><code>flex-start</code>:（默认值）从主轴的起点对齐    </li>
<li><code>flex-end</code>: 从主轴的终点对齐    </li>
<li><code>center</code>:从主轴的中间位置对齐    </li>
<li><code>space-between</code>:平均分布在主轴线上    </li>
<li><code>space-around</code>:平均分布在主轴线上，两端留下一半的距离</li>
</ul>
</li>
</ul>
<ul>
<li><code>flexWap</code><br>伸缩容器在主轴线方向空间不足的情况下，是否换行以及该如何换行<ul>
<li><code>nowrap</code>（默认值）</li>
<li><code>wrap</code>    </li>
<li><code>wrap-reverse</code></li>
</ul>
</li>
</ul>
<h3 id="次轴"><a href="#次轴" class="headerlink" title="次轴"></a>次轴</h3><ul>
<li><p><code>alignItems</code>：决定其子元素沿着次轴的排列方式</p>
<ul>
<li><code>flex-start</code>（默认值）交叉轴起点对齐</li>
<li><code>flex-end</code> 交叉轴终点对齐</li>
<li><code>center</code> 中点对齐</li>
<li><code>stretch</code> 拉伸</li>
<li><code>baseline</code> 基线对齐<br><code>baseline</code>对齐效果：<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829221739.png" alt=""><br><code>stretch</code>效果（不设置高度时）<br><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829221759.png" alt=""></li>
</ul>
</li>
<li><p><code>align-content</code><br>用来调整伸缩项目出现换行后在交叉轴上的对齐方式</p>
<ul>
<li><code>flex-start</code></li>
<li><code>flex-end</code>    </li>
<li><code>center</code>    </li>
<li><code>space-between</code>    </li>
<li><code>space-around</code>    </li>
<li><code>stretch</code>（默认值）</li>
</ul>
</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li><code>display</code><ul>
<li><code>flex</code>    块级伸缩容器    </li>
<li><code>inline-flex</code>行内级伸缩容器</li>
<li><code>none</code>隐藏元素</li>
</ul>
</li>
</ul>
<ul>
<li><code>flex-flow</code><br>同时定义了伸缩容器的主轴和侧轴, 其默认值为 <ul>
<li><code>row</code> </li>
<li><code>nowrap</code></li>
</ul>
</li>
</ul>
<h2 id="伸缩项目的属性"><a href="#伸缩项目的属性" class="headerlink" title="伸缩项目的属性"></a>伸缩项目的属性</h2><ul>
<li><p><code>order</code><br>定义项目的排列顺序，数值越小，排列越靠前，默认值为0<br>语法为：order：整数值</p>
</li>
<li><p><code>flex-grow</code><br>定义伸缩项目的放大比例，为整数值</p>
<ul>
<li>0(默认值): 不放大</li>
<li>其他值: 如果存在剩余空间，那么将自动占据全部剩余空间，每个item所占据的空间大小会根据这个值自动调整</li>
</ul>
</li>
<li><p><code>flex-shrink</code><br>定义伸缩项目的收缩能力，默认值为1 ，其语法为：flex-shrink:整数值</p>
<ul>
<li>1(默认值)    其他值</li>
<li>如果不存在剩余空间，那么将自动缩小</li>
</ul>
</li>
<li><p><code>flex-basis</code><br>用来设置伸缩项目的基准值，剩余的空间按比率进行伸缩</p>
<ul>
<li><code>auto</code>(默认值)    </li>
<li><code>length</code></li>
</ul>
</li>
<li><p><code>flex</code><br>是flex-grow flex-shrink flex-basis这三个属性的缩写，其语法为：flex:none | flex-grow flex-shrink flex-basis，其中第二个和第三个参数为可选参数，默认值为：0 1 auto</p>
</li>
<li><p><code>alignSelf</code><br>用来设置单独的伸缩项目在交叉轴上的对齐方式，会覆盖默认的对齐方式 </p>
<ul>
<li><code>auto</code> 按照自身设置的宽高进行显示    </li>
<li><code>flex-start</code>    </li>
<li><code>flex-end</code>    </li>
<li><code>center</code>    </li>
<li><code>baseline</code>    </li>
<li><code>stretch</code>默认,伸缩项目在交叉轴方向占满伸缩容器，如果交叉轴为垂直方向的话，只有在不设置高度的情况下才能看到效果</li>
</ul>
</li>
</ul>
<h1 id="React-Native中的postion定位"><a href="#React-Native中的postion定位" class="headerlink" title="React Native中的postion定位"></a>React Native中的postion定位</h1><ul>
<li><code>relative</code> 相对定位(默认)，以元素本来的位置为基准进行偏移。</li>
<li><code>absolute</code> 绝对定位，以父元素的边框为基准进行偏移。<br><a href="https://blog.csdn.net/al4fun/article/details/80253364" target="_blank" rel="noopener">https://blog.csdn.net/al4fun/article/details/80253364</a></li>
</ul>
<h1 id="width-39-100-39-与width-39-auto-39"><a href="#width-39-100-39-与width-39-auto-39" class="headerlink" title="width:&#39;100%&#39;与width:&#39;auto&#39;"></a><code>width:&#39;100%&#39;与width:&#39;auto&#39;</code></h1><ul>
<li><code>width:auto</code> 会将元素撑开至整个父元素width，但是会减去子节点自己的margin，padding或者border的大小。</li>
<li><code>width:100%</code> 会强制将元素变成和父元素一样的宽，并且添加额外的空间到这个元素的width上。就是因为这个，会导致很多问题。</li>
</ul>
<p>使用width:100%永远都不是一个好主意。这个属性容易让人产生你正在定义一个元素可视大小，其实，你是在对这个元素的状态做了巨大的改变。</p>
<pre><code>&lt;TouchableOpacity style={[styles.comButton]}&gt;
    &lt;Text
        style={[
        {
            width: &quot;100%&quot;,
            height: &quot;100%&quot;,
        }]}&gt;
        {item.title}
    &lt;/Text&gt;
&lt;/TouchableOpacity&gt;

comButton: {
    padding:0,
    flex: 1,
    alignItems: &quot;center&quot;,
    justifyContent: &quot;center&quot;,
    color: CommonStyle.col_gray_dark,
    borderColor: CommonStyle.col_gray_dark,
    borderWidth: 0.8,
    borderRadius: 48,
    height: 44
  }
</code></pre><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829222452.png" alt=""></p>
<pre><code>&lt;TouchableOpacity style={[styles.comButton]}&gt;
    &lt;Text
        style={[
        {
            width: Platform.OS === &#39;ios&#39; ? &#39;auto&#39; : &quot;100%&quot;,
            height: Platform.OS === &#39;ios&#39; ? &#39;auto&#39; : &quot;100%&quot;,
        }]}&gt;
        {item.title}
    &lt;/Text&gt;
&lt;/TouchableOpacity&gt;
</code></pre><p><img src="https://raw.githubusercontent.com/action456789/Image/master/20190829222515.png" alt=""></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/img/default_avatar.jpg"
                alt="action456789" />
            
              <p class="site-author-name" itemprop="name">action456789</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">44</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">categories</span>
                  
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/action456789" target="_blank" title="GitHub"><i class="fa fa-fw fa-globe"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.jianshu.com/u/7966a93b66ce" target="_blank" title="jianshu"><i class="fa fa-fw fa-globe"></i>jianshu</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">action456789</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.2.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.2.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.2.0"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
