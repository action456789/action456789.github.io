<!DOCTYPE html>






  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.2.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.2.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="superkk">
<meta property="og:url" content="http://liumengxia.shop/page/2/index.html">
<meta property="og:site_name" content="superkk">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="superkk">






  <link rel="canonical" href="http://liumengxia.shop/page/2/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>superkk</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d35cf97ff8f4abe81876248566401ad5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">superkk</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">action456789</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2016/08/02/GCD用法全解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/02/GCD用法全解/" itemprop="url">
                  GCD用法全解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-08-02 17:16:17" itemprop="dateCreated datePublished" datetime="2016-08-02T17:16:17+08:00">2016-08-02</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 17:45:41" itemprop="dateModified" datetime="2018-05-09T17:45:41+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2016/08/02/GCD用法全解/" class="leancloud_visitors" data-flag-title="GCD用法全解">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="dispatch-time与dispatch-walltime的区别"><a href="#dispatch-time与dispatch-walltime的区别" class="headerlink" title="dispatch_time与dispatch_walltime的区别"></a><code>dispatch_time</code>与<code>dispatch_walltime</code>的区别</h1><p>所有定时器dispatch source都是间隔定时器，一旦创建，会按你指定的间隔定期递送事件。<br>当计算机睡眠时，定时器dispatch source会被挂起，稍后系统唤醒时，定时器dispatch source也会自动唤醒。<br>定时器dispatch source会使用系统默认时钟来确定何时触发，但是默认时钟在计算机睡眠时不会继续。</p>
<p>如果你使用 dispatch_walltime 函数来设置定时器dispatch source，则定时器会根据挂钟时间来跟踪，<br>这种定时器比较适合触发间隔相对比较大的场合，可以防止定时器触发间隔出现太大的误差。</p>
<p>区别：</p>
<ol>
<li><p><code>dispatch_time_t</code>类型的时间我们可以通过<code>dispatch_time</code>来创建，也可以通过<code>dispatch_walltime</code>来创建。<br><code>dispatch_time</code>创建的时间多以第一个参数为参照物，之后过多久执行任务。<br><code>dispatch_walltime</code>多用于创建绝对时间，如某年某月某日某时某分执行某任务，比如闹钟的设置。</p>
</li>
<li><p><code>dispatch_time</code>在计算机睡眠时会停止<br><code>dispatch_walltime</code>不会</p>
</li>
</ol>
<p>例如以下情景</p>
<p>情景：希望一小时后执行任务，5分钟后计算机进入睡眠<br>操作：50分钟后唤醒计算机<br>实际：使用<code>dispatch_walltime</code>时: 5分钟后开始执行<br>使用<code>dispatch_time</code>: 55分钟后开始执行</p>
<h1 id="GCD-定时器的使用"><a href="#GCD-定时器的使用" class="headerlink" title="GCD 定时器的使用"></a>GCD 定时器的使用</h1><h2 id="dispatch-source-set-timer-最后一个参数-leeway-详解"><a href="#dispatch-source-set-timer-最后一个参数-leeway-详解" class="headerlink" title="dispatch_source_set_timer 最后一个参数 leeway 详解"></a><code>dispatch_source_set_timer</code> 最后一个参数 <code>leeway</code> 详解</h2><ul>
<li><code>leeway</code> 这个参数告诉系统我们需要计时器触发的精准程度。所有的计时器都不会保证100%精准，这个参数用来告诉系统你希望系统保证精准的努力程度。如果你希望一个计时器没五秒触发一次，并且越准越好，那么你传递0为参数。</li>
<li>如果是一个周期性任务，比如检查email，那么你会希望每十分钟检查一次，但是不用那么精准。所以你可以传入60，告诉系统60秒的误差是可接受的。  </li>
<li>这样有什么意义呢？——降低资源消耗。如果系统可以让cpu休息足够长的时间，并在每次醒来的时候执行一个任务集合，而不是不断的醒来睡去以执行任务，那么系统会更高效。如果传入一个比较大的leeway给你的计时器，意味着你允许系统拖延你的计时器来将计时器任务与其他任务联合起来一起执行。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    dispatch_queue_t mainQueue = dispatch_get_main_queue();</span><br><span class="line">    NSTimeInterval interval = 1.0f;</span><br><span class="line">    NSTimeInterval delay = 1.0f;</span><br><span class="line">    dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, mainQueue);</span><br><span class="line">    dispatch_source_set_timer(timer, dispatch_time(DISPATCH_TIME_NOW, delay), interval * NSEC_PER_SEC, 1.0 * NSEC_PER_SEC);</span><br><span class="line">    dispatch_source_set_event_handler(timer, ^&#123;</span><br><span class="line">        NSLog(@&quot;%s&quot;, __func__);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_resume(timer);</span><br><span class="line">    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(6 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;</span><br><span class="line">    dispatch_source_cancel(timer);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="测试代码执行效率"><a href="#测试代码执行效率" class="headerlink" title="测试代码执行效率"></a>测试代码执行效率</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">func testPerformance(closure: ()-&gt;()) &#123;</span><br><span class="line">    let startTime: dispatch_time_t = dispatch_time(DISPATCH_TIME_NOW, 0)</span><br><span class="line">    closure()</span><br><span class="line">    let endTime: dispatch_time_t = dispatch_time(DISPATCH_TIME_NOW, 0)</span><br><span class="line">    print(endTime - startTime)</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">func testFunctionPerformance(selector: Selector) &#123;</span><br><span class="line">    let startTime: dispatch_time_t = dispatch_time(DISPATCH_TIME_NOW, 0)</span><br><span class="line">    self.performSelector(selector)</span><br><span class="line">    let endTime: dispatch_time_t = dispatch_time(DISPATCH_TIME_NOW, 0)</span><br><span class="line">    print(endTime - startTime)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="GCD-加锁"><a href="#GCD-加锁" class="headerlink" title="GCD 加锁"></a>GCD 加锁</h1><h2 id="GCD-信号量的使用"><a href="#GCD-信号量的使用" class="headerlink" title="GCD 信号量的使用"></a>GCD 信号量的使用</h2><ol>
<li>设置信号量的个数为1时，可以当锁来使用</li>
<li>设置信号量的个数与CPU个数相近时（比如CPU个数 * 2），可以用来限制线程个数。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">var semaphore: dispatch_semaphore_t = dispatch_semaphore_create(1)</span><br><span class="line"></span><br><span class="line">//MARK: ------------------- 使用信号量进行加锁操作 --------------------</span><br><span class="line">func test_semaphore() &#123;</span><br><span class="line">    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)) &#123; () -&gt; Void in  self.tast_first()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)) &#123; () -&gt; Void in  self.tast_second()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)) &#123; () -&gt; Void in  self.tast_third()</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">func tast_first() &#123;</span><br><span class="line">    // p操作，进入临界区      dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER)</span><br><span class="line"></span><br><span class="line">    print(&quot;First tast starting&quot;)</span><br><span class="line">    sleep(1)</span><br><span class="line">    NSLog(&quot;%@&quot;, &quot;First task is done&quot;)</span><br><span class="line"></span><br><span class="line">    // v操作，离开临界区      dispatch_semaphore_signal(self.semaphore)</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">func tast_second() &#123;</span><br><span class="line">    dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER)</span><br><span class="line">    print(&quot;Second tast starting&quot;)</span><br><span class="line">    sleep(1)</span><br><span class="line">    NSLog(&quot;%@&quot;, &quot;Second task is done&quot;)</span><br><span class="line">    dispatch_semaphore_signal(self.semaphore)</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">func tast_third() &#123;</span><br><span class="line">    dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER)</span><br><span class="line">    print(&quot;Third tast starting&quot;)</span><br><span class="line">    sleep(1)</span><br><span class="line">    NSLog(&quot;%@&quot;, &quot;Thrid task is done&quot;)</span><br><span class="line">    dispatch_semaphore_signal(self.semaphore)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="使用信号量控制多线程中代码执行顺序"><a href="#使用信号量控制多线程中代码执行顺序" class="headerlink" title="使用信号量控制多线程中代码执行顺序"></a>使用信号量控制多线程中代码执行顺序</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)test_dispatch_semaphore_t_0 &#123;</span><br><span class="line">    dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);</span><br><span class="line">    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">        [self method1];</span><br><span class="line">        sleep(10);</span><br><span class="line">        dispatch_semaphore_signal(semaphore);</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</span><br><span class="line">    [self method2];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="延时执行"><a href="#延时执行" class="headerlink" title="延时执行"></a>延时执行</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">//MARK: ------------------- dispatch_after 的使用-------------------- func dispatchAfter() &#123;</span><br><span class="line">    let delay: dispatch_time_t = dispatch_time(DISPATCH_TIME_NOW, Int64(5 * Double(NSEC_PER_SEC)))</span><br><span class="line">    dispatch_after(delay, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)) &#123; () -&gt; Void in  print(&quot;viewDidLoad()&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># GCD 多任务异步执行与 `dispatch_notify` 的使用</span><br><span class="line">```Objective-C</span><br><span class="line">//MARK: ------------------- 多任务异步执行 与 dispatch_group_notify 的使用 -------------------- func dispatchGroup() &#123;</span><br><span class="line">    let group: dispatch_group_t = dispatch_group_create()</span><br><span class="line">    let globalQueueDefault: dispatch_queue_t = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)</span><br><span class="line"></span><br><span class="line">    // 串行队列按照先进先出的顺序执行（FIFO）      </span><br><span class="line">    let userQueueSerie: dispatch_queue_t = dispatch_queue_create(&quot;com.dispatchGroup.demo&quot;, DISPATCH_QUEUE_SERIAL)</span><br><span class="line"></span><br><span class="line">    // 下载任务1     </span><br><span class="line">    dispatch_group_async(group, userQueueSerie)&#123;</span><br><span class="line">        sleep(3)</span><br><span class="line">        NSLog(&quot;Task1 is done&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 下载任务2     </span><br><span class="line">    dispatch_group_async(group, userQueueSerie)&#123;</span><br><span class="line">        sleep(3)</span><br><span class="line">        NSLog(&quot;Task2 is done&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 下载任务3     </span><br><span class="line">    dispatch_group_async(group, globalQueueDefault)&#123;</span><br><span class="line">        sleep(3)</span><br><span class="line">        NSLog(&quot;Task3 is done&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 监听任务组事件的执行完毕      </span><br><span class="line">    dispatch_group_notify(group, dispatch_get_main_queue())&#123;</span><br><span class="line">        NSLog(&quot;Group tasks are done&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 设置等待时间(即设置超时)，在等待时间结束后，如果还没有执行完任务组，则返回。返回0代表执行成功，非0则执行失败      </span><br><span class="line">    // 等待直到完成      </span><br><span class="line">    let result = dispatch_group_wait(group, DISPATCH_TIME_FOREVER)</span><br><span class="line">    if (result != 0) &#123;</span><br><span class="line">        print(&quot;Now viewDidLoad is done&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># dispatch_group_apply</span><br><span class="line"></span><br><span class="line">```Objective-C</span><br><span class="line">//MARK: ------------------- 多任务异步执行/同步执行 与 dispatch_apply 的使用 -------------------- </span><br><span class="line">func dispatchApply() &#123;</span><br><span class="line">    let iterations: Int = 20 // 迭代次数      </span><br><span class="line">    let globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)</span><br><span class="line"></span><br><span class="line">    // 同步执行      </span><br><span class="line">    self.testPerformance &#123; () -&gt; () in  </span><br><span class="line">        dispatch_apply(iterations, globalQueue) &#123; (index: Int) -&gt; </span><br><span class="line">            Void in  print(index, NSThread.currentThread())</span><br><span class="line">        &#125;</span><br><span class="line">        NSLog(&quot;iterations is over&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    print(&quot;------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">    // 异步执行      </span><br><span class="line">    self.testPerformance &#123; () -&gt; () in  </span><br><span class="line">        dispatch_apply(iterations, globalQueue, &#123; (index: Int) -&gt; Void in  </span><br><span class="line">            dispatch_async(globalQueue, &#123; () -&gt; Void in </span><br><span class="line">                 print(index, NSThread.currentThread())</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        NSLog(&quot;iterations is over&quot;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    print(&quot;------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">    self.testPerformance &#123; () -&gt; () in  </span><br><span class="line">        for i:Int in 1...iterations &#123;</span><br><span class="line">            print(i, NSThread.currentThread())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="dispatch-group-enter-dispatch-group-leave"><a href="#dispatch-group-enter-dispatch-group-leave" class="headerlink" title="dispatch_group_enter / dispatch_group_leave"></a><code>dispatch_group_enter</code> / <code>dispatch_group_leave</code></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//MARK: ------------------- dispatch_group_enter / dispatch_group_leave -------------------</span><br><span class="line">// 将任务组中的任务未执行完毕的任务数目加减1，这种方式不使用 dispatch_group_async 来提交任务， </span><br><span class="line">// 注意：这两个函数要配合使用，有enter要有leave，这样才能保证功能完整实现。    </span><br><span class="line">// 串行执行三个任务  </span><br><span class="line">func dispatchGroup_EnterAndLeave_Seriel() &#123;</span><br><span class="line">    let group = dispatch_group_create()</span><br><span class="line"></span><br><span class="line">    for index:UInt32 in 1...3&#123;</span><br><span class="line">        dispatch_group_enter(group)//提交了一个任务，任务数目加1        </span><br><span class="line">        manualDownLoad(index)&#123;</span><br><span class="line">            print(&quot;Task \(index) is done&quot;)</span><br><span class="line"></span><br><span class="line">            dispatch_group_leave(group)//完成一个任务，任务数目减1 &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    func manualDownLoad(num: UInt32, block:()-&gt;())&#123;</span><br><span class="line">        print(&quot;Downloading task &quot;, num)</span><br><span class="line">        sleep(num)</span><br><span class="line">        block()</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    // 并行执行三个任务  </span><br><span class="line">    func dispatchGroup_EnterAndLeave_Concurrent() &#123;</span><br><span class="line">        let group = dispatch_group_create()//创建group    </span><br><span class="line">        let globalQueueDefault = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0)</span><br><span class="line"></span><br><span class="line">        for index:UInt32 in 1...3 &#123;</span><br><span class="line">            dispatch_group_enter(group)//提交了一个任务，任务数目加1        </span><br><span class="line">            manualDownLoad(index, queue: globalQueueDefault)&#123;</span><br><span class="line">            NSLog(&quot;Task\(index) is done&quot;)</span><br><span class="line"></span><br><span class="line">            dispatch_group_leave(group)//完成一个任务，任务数目减1 &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    func manualDownLoad(num: UInt32, queue:dispatch_queue_t, block:()-&gt;())&#123;</span><br><span class="line">        dispatch_async(queue)&#123;</span><br><span class="line">            NSLog(&quot;Downloading task\(num)&quot;)</span><br><span class="line">            sleep(num)</span><br><span class="line">            block()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="GCD-实战：资源竞争"><a href="#GCD-实战：资源竞争" class="headerlink" title="GCD 实战：资源竞争"></a>GCD 实战：资源竞争</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//MARK: ------------------- 多线程测试：资源竞争 --------------------</span><br><span class="line"> func test_mutiThread() &#123;</span><br><span class="line">        let userSerialQueue = dispatch_queue_create(&quot;com.test.mutiThread.userSerialQueue&quot;, DISPATCH_QUEUE_SERIAL)</span><br><span class="line">        let globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)</span><br><span class="line">        let group = dispatch_group_create()</span><br><span class="line"></span><br><span class="line">        // 当 &quot;Processing data&quot;（CUP处理速度） 速度远小于 &quot;Reading file&quot;（磁盘处理速度） 速度时，线程数占用过多          // 使用信号量来限制同时执行的任务的数量         </span><br><span class="line">        let cupCount = NSProcessInfo.processInfo().processorCount // CPU 数量</span><br><span class="line">        let jobSemaphore = dispatch_semaphore_create(cupCount * 2) // 限制线程个数</span><br><span class="line"></span><br><span class="line">        for i:Int in 1...50 &#123;</span><br><span class="line">            dispatch_semaphore_wait(jobSemaphore, DISPATCH_TIME_FOREVER);</span><br><span class="line">            dispatch_group_async(group, userSerialQueue, &#123; () -&gt; Void in  print(&quot;Reading file&quot;, i, NSThread.currentThread())</span><br><span class="line">                // sleep(2)                </span><br><span class="line">                dispatch_group_async(group, globalQueue, &#123; () -&gt; Void in  print(&quot;  Processing data&quot;, i, NSThread.currentThread())</span><br><span class="line">                    sleep(1)</span><br><span class="line"></span><br><span class="line">                    dispatch_group_async(group, userSerialQueue, &#123; () -&gt; Void in  print(&quot;    writing file&quot;, i, NSThread.currentThread())</span><br><span class="line">                        // sleep(2)                        </span><br><span class="line">                        dispatch_semaphore_signal(jobSemaphore);</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        dispatch_group_wait(group, DISPATCH_TIME_FOREVER)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="http://www.jianshu.com/p/6670cdbb1ebb" target="_blank" rel="noopener">http://www.jianshu.com/p/6670cdbb1ebb</a><br><a href="http://www.dreamingwish.com/article/gcd-practice-io-race.html" target="_blank" rel="noopener">http://www.dreamingwish.com/article/gcd-practice-io-race.html</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2016/06/09/CocoaPods-管理私有库/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/06/09/CocoaPods-管理私有库/" itemprop="url">
                  CocoaPods 管理私有库
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-06-09 18:02:18" itemprop="dateCreated datePublished" datetime="2016-06-09T18:02:18+08:00">2016-06-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 18:02:51" itemprop="dateModified" datetime="2018-05-09T18:02:51+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2016/06/09/CocoaPods-管理私有库/" class="leancloud_visitors" data-flag-title="CocoaPods 管理私有库">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[toc]</p>
<h1 id="一、创建私有-Cocoapod-Spec-Repo-仓库"><a href="#一、创建私有-Cocoapod-Spec-Repo-仓库" class="headerlink" title="一、创建私有 Cocoapod Spec Repo 仓库"></a>一、创建私有 <code>Cocoapod Spec Repo</code> 仓库</h1><p><code>Spec Repo</code> 是所有 pod 的索引，自己创建的私有 pod 库都将放在这里</p>
<ol>
<li>创建一个空的私有 <code>Cocoapod Spec Repo</code> 的远程 git 仓库</li>
<li>执行命令<br><code>pod repo add KSSpecPods https://coding.net/u/action456789/p/KSSpecPods.git</code></li>
<li>查看是否创建成功<br>进入到<code>~/.cocoapods/repos</code>目录下，如果看到 <code>KSSpecPods</code> ，说明创建成功</li>
</ol>
<h1 id="二、创建需要放入-Cocoapod-Spec-Repo-仓库进行管理的私有库"><a href="#二、创建需要放入-Cocoapod-Spec-Repo-仓库进行管理的私有库" class="headerlink" title="二、创建需要放入 Cocoapod Spec Repo 仓库进行管理的私有库"></a>二、创建需要放入 Cocoapod Spec Repo 仓库进行管理的私有库</h1><h2 id="创建全新的私有库时"><a href="#创建全新的私有库时" class="headerlink" title="创建全新的私有库时"></a>创建全新的私有库时</h2><ol>
<li><p>创建私有库的远程 git 仓库</p>
</li>
<li><p>创建本地私有库<br><code>pod lib create podTestLibrary</code></p>
</li>
<li><p>关联本地私有库与远程仓库，并打上版本号，然后推送到远程 git 仓库<br><code>git tag -m &quot;first release&quot; 0.1.0</code><br><code>git push --tags     #推送tag到远端仓库</code></p>
</li>
<li><p>编辑<code>podspec</code>文件<br>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">Pod::Spec.new do |s|</span><br><span class="line">s.name             = &apos;TAFNetwork&apos;</span><br><span class="line">s.version          = &apos;0.1.0&apos;</span><br><span class="line">s.summary          = &apos;Just Testing.&apos;</span><br><span class="line"></span><br><span class="line">s.description      = &lt;&lt;-DESC</span><br><span class="line">Testing Private Podspec.</span><br><span class="line"></span><br><span class="line">* Markdown format.</span><br><span class="line">* Don&apos;t worry about the indent, we strip it!</span><br><span class="line">DESC</span><br><span class="line"></span><br><span class="line">s.homepage         = &apos;https://github.com/action456789/CocoapodsPrivateLibTest&apos;                           #主页,这里要填写可以访问到的地址，不然验证不通过</span><br><span class="line"># s.screenshots     = &apos;www.example.com/screenshots_1&apos;, &apos;www.example.com/screenshots_2&apos;      #截图</span><br><span class="line">s.license          = &apos;MIT&apos;                                                                  #开源协议</span><br><span class="line">s.author           = &#123; &apos;kesen&apos; =&gt; &apos;317331820@qq.com&apos; &#125;</span><br><span class="line"></span><br><span class="line">s.source           = &#123; :git =&gt; &apos;https://github.com/action456789/CocoapodsPrivateLibTest.git&apos;, :tag =&gt; s.version&#125;   #项目地址，这里不支持ssh的地址，验证不通过，只支持HTTP和HTTPS，最好使用HTTPS</span><br><span class="line"></span><br><span class="line"># s.social_media_url = &apos;https://twitter.com/&lt;TWITTER_USERNAME&gt;&apos;                             #多媒体介绍地址</span><br><span class="line"></span><br><span class="line">s.platform     = :ios, &apos;7.0&apos;                  #支持的平台及版本</span><br><span class="line">s.requires_arc = true                         #是否使用ARC，如果指定具体文件，则具体的问题使用ARC</span><br><span class="line"></span><br><span class="line">s.source_files = &apos;TAFNetwork/Classes/**/*&apos;    #代码源文件地址，**/*表示Classes目录及其子目录下所有文件，</span><br><span class="line"></span><br><span class="line">#    s.resource_bundles = &#123;                                      #资源文件地址</span><br><span class="line">#        &apos;TAFNetwork&apos; =&gt; [&apos;TAFNetwork/Assets/*.png&apos;]</span><br><span class="line">#    &#125;</span><br><span class="line"></span><br><span class="line">s.public_header_files = &apos;TAFNetwork/Classes/**/*.h&apos;          #NAME_OF_POD/Classes/**/*&apos;，公开头文件地址</span><br><span class="line">s.frameworks = &apos;UIKit&apos;                                       #所需的framework，多个用逗号隔开</span><br><span class="line"></span><br><span class="line">#    s.dependency &apos;CocoaAsyncSocket&apos;, &apos;~&gt; 7.5.0&apos;</span><br><span class="line">#    s.dependency &apos;FMDB&apos;, &apos;~&gt; 2.5&apos;</span><br><span class="line">#    s.dependency &apos;Reachability&apos;, &apos;~&gt; 3.2&apos;</span><br><span class="line">#    s.dependency &apos;SAMKeychain&apos;, &apos;~&gt; 1.5.2&apos;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证<code>podspec</code><br>执行<br><code>pod lib lint</code></p>
</li>
</ol>
<h2 id="私有库项目已经存在时"><a href="#私有库项目已经存在时" class="headerlink" title="私有库项目已经存在时"></a>私有库项目已经存在时</h2><ol>
<li>创建 <code>podspec</code> 文件<br><code>pod spec create PodTestLibrary git@coding.net:wtlucky/podTestLibrary.git</code></li>
<li>验证<code>podspec</code><br>执行<br><code>pod lib lint</code></li>
</ol>
<h1 id="三、本地测试podspec文件"><a href="#三、本地测试podspec文件" class="headerlink" title="三、本地测试podspec文件"></a>三、本地测试podspec文件</h1><p>1）新建一个项目，在这个项目的Podfile文件中直接指定刚才创建编辑好的podspec文件，看是否可用。 在Podfile中我们可以这样编辑，有两种方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod &apos;podTestLibrary&apos;, :podspec =&gt; &apos;/Users/kesen/Desktop/Repository/KSSpecPods/podTestLibrary/podTestLibrary.podspec&apos;  # 指定podspec文件</span><br><span class="line"># pod &apos;podTestLibrary&apos;, :path =&gt; &apos;/Users/kesen/Desktop/Repository/KSSpecPods&apos;      # 指定路径</span><br></pre></td></tr></table></figure></p>
<p>2）安装依赖<br><code>pod install</code></p>
<h1 id="四、提交私有库到私有-Cocoapod-Spec-Repo-仓库"><a href="#四、提交私有库到私有-Cocoapod-Spec-Repo-仓库" class="headerlink" title="四、提交私有库到私有 Cocoapod Spec Repo 仓库"></a>四、提交私有库到私有 <code>Cocoapod Spec Repo</code> 仓库</h1><ol>
<li>进入私有库目录，执行<br><code>pod repo push KSSpecPods podTestLibrary.podspec</code></li>
<li>进入<code>/Users/kesen/.cocoapods/KSSpecPods</code>查看是否提交成功</li>
</ol>
<h1 id="五、私有制作好的私有库"><a href="#五、私有制作好的私有库" class="headerlink" title="五、私有制作好的私有库"></a>五、私有制作好的私有库</h1><p>1）在 podfile 文件中加入代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod &apos;PodTestLibrary&apos;, &apos;~&gt; 0.1.0&apos;</span><br></pre></td></tr></table></figure></p>
<p>2）执行 <code>pod update</code><br>然后打开项目可以看到，我们自己的库文件已经出现在Pods子项目中的Pods子目录下了</p>
<h1 id="六、更新私有库"><a href="#六、更新私有库" class="headerlink" title="六、更新私有库"></a>六、更新私有库</h1><p>参考<br><a href="http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/" target="_blank" rel="noopener">http://blog.wtlucky.com/blog/2015/02/26/create-private-podspec/</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2016/04/12/如何更新React-Native/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/12/如何更新React-Native/" itemprop="url">
                  如何更新React Native
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-04-12 15:32:04" itemprop="dateCreated datePublished" datetime="2016-04-12T15:32:04+08:00">2016-04-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 16:11:38" itemprop="dateModified" datetime="2018-05-09T16:11:38+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2016/04/12/如何更新React-Native/" class="leancloud_visitors" data-flag-title="如何更新React Native">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>最新的React Native已经更新到了0.33.0，如何更新自己已经搭建好的React Native开发环境呢，我按照以下步骤完成了更新，现记录下来，供有需要的人参考。</p>
</blockquote>
<h2 id="1-查看-react-native-的最新版本。"><a href="#1-查看-react-native-的最新版本。" class="headerlink" title="1.查看 react native 的最新版本。"></a>1.查看 react native 的最新版本。</h2><p>进入项目根目录，命令行执行<br><code>npm info react-native</code></p>
<p>查看当前版本<code>react-native --version</code></p>
<h2 id="2-在项目目录下修改package-json文件，将下列代码中的-react-native-改为最新版本"><a href="#2-在项目目录下修改package-json文件，将下列代码中的-react-native-改为最新版本" class="headerlink" title="2.在项目目录下修改package.json文件，将下列代码中的 react-native 改为最新版本"></a>2.在项目目录下修改<code>package.json</code>文件，将下列代码中的 react-native 改为最新版本</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">      &quot;react&quot;: &quot;^0.14.8&quot;,</span><br><span class="line">          &quot;react-native&quot;: &quot;^0.33.0&quot;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<pre><code>## 3. 命令行执行
`npm install --save react-native@0.33.0`

如果升级后出现类似于
`react-native@0.33.0 requires a peer of react@~15.3.1 but none was installed.`

执行
`npm install --save react@~15.3.1`

## 4. 运行程序
如果更新后执行react-native run-android不能正确运行，而是出现类似：
 Could not find com.facebook.react:react-native:0.23.0.
 错误，或者在Android Studio中直接运行app时报错：
 Android Studio failed to resolve com.facebook.react:react-native:0.23.0
 那么可以按照下列命令修复，首先在命令行中执行：
 `npm i`
 执行完毕且不报错后，执行下面的命令，**注意，在执行命令之后，某些文件可能会产生冲突，请确保你的本地文件记录可以恢复**（在Android Studio中可以查看历史记录来恢复文件）
 `react-native upgrade`

 执行上面的命令可能会提示你是否覆盖文件。在解决冲突之后重新运行App即可。

 ## 如果还有问题，可以更新一下npm和Node.js再试
 - 如何更新npm
 `npm install -g npm`
 - 如何更新Node.js
 `npm update node.js`
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2016/01/09/消除编译器警告/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/01/09/消除编译器警告/" itemprop="url">
                  消除编译器警告
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2016-01-09 17:54:41" itemprop="dateCreated datePublished" datetime="2016-01-09T17:54:41+08:00">2016-01-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 17:56:09" itemprop="dateModified" datetime="2018-05-09T17:56:09+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2016/01/09/消除编译器警告/" class="leancloud_visitors" data-flag-title="消除编译器警告">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="关闭-deprecated-declarations-警告"><a href="#关闭-deprecated-declarations-警告" class="headerlink" title="关闭 deprecated-declarations 警告."></a>关闭 <code>deprecated-declarations</code> 警告.</h1><h2 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程:"></a>基本流程:</h2><ol>
<li>push 当前警告入栈</li>
<li>忽略我们要消除的警告</li>
<li>执行会产生警告的代码</li>
<li>pop 警告出栈——恢复之前的状态<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#pragma clang diagnostic push</span><br><span class="line">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span><br><span class="line">/*</span><br><span class="line">要屏蔽掉deprecated警告的代码</span><br><span class="line">*/</span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="关闭-XCode8-Convenience-initializer-missing-a-self-call-to-警告"><a href="#关闭-XCode8-Convenience-initializer-missing-a-self-call-to-警告" class="headerlink" title="关闭 XCode8 Convenience initializer missing a self call to.... 警告"></a>关闭 XCode8 <code>Convenience initializer missing a self call to....</code> 警告</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#pragma clang diagnostic push</span><br><span class="line">#pragma clang diagnostic ignored &quot;-Wobjc-designated-initializers&quot;</span><br><span class="line">/*</span><br><span class="line">要屏蔽掉deprecated警告的代码</span><br><span class="line">*/</span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure>
<h1 id="undeclared-selector警告"><a href="#undeclared-selector警告" class="headerlink" title="undeclared selector警告"></a><code>undeclared selector</code>警告</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#pragma clang diagnostic push</span><br><span class="line"></span><br><span class="line">#pragma clang diagnostic ignored&quot;-Wundeclared-selector&quot;</span><br><span class="line"></span><br><span class="line">//......</span><br><span class="line"></span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure>
<h1 id="Category-is-implementing-a-method-which-will-also-be-implemented-by-its-primary-class"><a href="#Category-is-implementing-a-method-which-will-also-be-implemented-by-its-primary-class" class="headerlink" title="Category is implementing a method which will also be implemented by its primary class"></a><code>Category is implementing a method which will also be implemented by its primary class</code></h1><p>当category重写类已有的方法时会出现此警告。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#pragma clang diagnostic push</span><br><span class="line"></span><br><span class="line">#pragma clang diagnostic ignored &quot;-Wobjc-protocol-method-implementation”</span><br><span class="line"></span><br><span class="line">//.....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2015/11/06/iOS编译ffmpeg/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/11/06/iOS编译ffmpeg/" itemprop="url">
                  iOS编译ffmpeg
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-11-06 10:59:45" itemprop="dateCreated datePublished" datetime="2015-11-06T10:59:45+08:00">2015-11-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 18:00:27" itemprop="dateModified" datetime="2018-05-09T18:00:27+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2015/11/06/iOS编译ffmpeg/" class="leancloud_visitors" data-flag-title="iOS编译ffmpeg">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="iOS编译ffmpeg"><a href="#iOS编译ffmpeg" class="headerlink" title="iOS编译ffmpeg"></a>iOS编译ffmpeg</h1><p>参考<a href="http://www.jianshu.com/p/08107176d5bb" target="_blank" rel="noopener">http://www.jianshu.com/p/08107176d5bb</a></p>
<h2 id="1）-下载”一键编译”脚本"><a href="#1）-下载”一键编译”脚本" class="headerlink" title="1） 下载”一键编译”脚本"></a>1） 下载”一键编译”脚本</h2><p><a href="https://github.com/kewlbear/FFmpeg-iOS-build-script" target="_blank" rel="noopener">https://github.com/kewlbear/FFmpeg-iOS-build-script</a></p>
<h2 id="2）编译能在iOS下使用的FFMPEG-library库"><a href="#2）编译能在iOS下使用的FFMPEG-library库" class="headerlink" title="2）编译能在iOS下使用的FFMPEG library库"></a>2）编译能在iOS下使用的FFMPEG library库</h2><p>进入脚本目录，执行<br><code>./build-ffmpeg.sh</code></p>
<h2 id="3）在xcode中引入FFMPEG-library库"><a href="#3）在xcode中引入FFMPEG-library库" class="headerlink" title="3）在xcode中引入FFMPEG library库"></a>3）在xcode中引入FFMPEG library库</h2><p>新建工程，把上面编译好的FFmpeg-iOS拖到xcode工程中</p>
<p>编译后的文件夹中<br><code>ffmpeg-2.5.3</code> 是源码<br><code>FFmpeg-iOS</code> 是编译出来的库，里面有我们需要的.a静态库，一共有7个</p>
<p>执行<code>lipo -info libavcodec.a</code>，查看.a包支持的架构，这几个包都支持了<code>armv7 armv7s i386 x86_64 arm64</code>这几个架构，这个脚本果真是业界良心啊～～～</p>
<h2 id="4）加入依赖库"><a href="#4）加入依赖库" class="headerlink" title="4）加入依赖库"></a>4）加入依赖库</h2><p><code>libz.tbd</code> <code>libbz2.tbd</code> <code>libiconv.tbd</code>等<br><img src="https://upload-images.jianshu.io/upload_images/1120923-bccdc2e6176cb125.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="78559964.png"></p>
<h2 id="5）为TARGETS-添加-search-paths"><a href="#5）为TARGETS-添加-search-paths" class="headerlink" title="5）为TARGETS 添加 search paths"></a>5）为TARGETS 添加 search paths</h2><p>项目根目录用 <code>$(SRCROOT)</code> 表示</p>
<ul>
<li>添加 Header Search Paths<br><code>$(inherited)</code><br><code>$(SRCROOT)/FfmpegDemo/FFmpeg-iOS/lib</code><br><img src="https://upload-images.jianshu.io/upload_images/1120923-8ee9a3eeed2d3909.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="72612549.png"></li>
</ul>
<ul>
<li>添加 Library Search Paths （系统可能已经添加）<br><code>$(inherited)</code><br>`$(SRCROOT)/FfmpegDemo/FFmpeg-iOS/include<br><img src="https://upload-images.jianshu.io/upload_images/1120923-5217e7cf6a5fd309.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="72413903.png"></li>
</ul>
<blockquote>
<p>如果编译不过（如缺少文件）一般都是search paths路径没写对</p>
</blockquote>
<h2 id="5）修改某个-m文件为-mm"><a href="#5）修改某个-m文件为-mm" class="headerlink" title="5）修改某个.m文件为.mm"></a>5）修改某个.m文件为.mm</h2><p>注意，不能是引入FFmpeg库的文件，否则编译不过</p>
<h2 id="6）引入头文件"><a href="#6）引入头文件" class="headerlink" title="6）引入头文件"></a>6）引入头文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;avformat.h&quot;</span><br></pre></td></tr></table></figure>
<p>如果编译成功，说明 search patchs 设置成功</p>
<h2 id="7）添加代码"><a href="#7）添加代码" class="headerlink" title="7）添加代码"></a>7）添加代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;avutil.h&quot;</span><br><span class="line"></span><br><span class="line">av_register_all();</span><br><span class="line">// 获取 ffmpeg 版本号</span><br><span class="line">const char *version = av_version_info();</span><br><span class="line">NSLog(@&quot;version: %s&quot;, version);</span><br></pre></td></tr></table></figure>
<p>执行成功说明集成成功</p>
<h1 id="各个CPU构架支持的设备"><a href="#各个CPU构架支持的设备" class="headerlink" title="各个CPU构架支持的设备"></a>各个CPU构架支持的设备</h1><p><img src="https://upload-images.jianshu.io/upload_images/1120923-5a4d76d47a24e554.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="68265767.png"></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2015/09/09/Hexo-GitHub博客搭建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/09/Hexo-GitHub博客搭建/" itemprop="url">
                  Hexo GitHub博客搭建
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-09-09 12:01:05" itemprop="dateCreated datePublished" datetime="2015-09-09T12:01:05+08:00">2015-09-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 16:36:18" itemprop="dateModified" datetime="2018-05-09T16:36:18+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2015/09/09/Hexo-GitHub博客搭建/" class="leancloud_visitors" data-flag-title="Hexo GitHub博客搭建">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="相关网站"><a href="#相关网站" class="headerlink" title="相关网站"></a>相关网站</h1><p><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a></p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ul>
<li><p>1、安装<code>Node.js</code><br><a href="https://blog.csdn.net/u011619283/article/details/52368759" target="_blank" rel="noopener">https://blog.csdn.net/u011619283/article/details/52368759</a></p>
</li>
<li><p>2、安装hexo<br><code>npm install -g hexo-cli</code></p>
</li>
</ul>
<h1 id="本地站点搭建"><a href="#本地站点搭建" class="headerlink" title="本地站点搭建"></a>本地站点搭建</h1><ul>
<li><p>1、初始化 Hexo<br>进入自己创建的目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>
</li>
<li><p>2、生成静态页面</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、启动服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>
</li>
<li><p>4、查看效果<br>打开浏览器，输入 <code>http://localhost:4000/</code></p>
</li>
</ul>
<h1 id="部署到github"><a href="#部署到github" class="headerlink" title="部署到github"></a>部署到github</h1><ul>
<li><p>1、创建仓库<br>仓库名称固定格式如下：<br><code>yourGitbubUsername.github.io</code><br>注意yourGitbubUsername必须与你的github用户名相同，否则无法部署</p>
</li>
<li><p>2、安装github部署器</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git –save</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、修改本地配置文件<code>_config.yml</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">type: git</span><br><span class="line">repo: https://github.com/action456789/action456789.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure>
</li>
<li><p>4、部署</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
</li>
<li><p>5、测试<br>部署成功以后，在浏览器中输入 <a href="http://action456789.github.io" target="_blank" rel="noopener">http://action456789.github.io</a> 即可在线浏览自己的博客啦</p>
</li>
</ul>
<h1 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h1><p><a href="https://www.cnblogs.com/penglei-it/p/hexo_domain_name.html（亲测可行）" target="_blank" rel="noopener">https://www.cnblogs.com/penglei-it/p/hexo_domain_name.html（亲测可行）</a></p>
<h1 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h1><ul>
<li><p>直接去查找最流行的主题，github上有安装说明，这个是最靠谱的安装方法。</p>
</li>
<li><p>安装完成之后：<br>输入<code>hexo s --debug</code>进行测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo clean </span><br><span class="line">hexo generate </span><br><span class="line">hexo server (若是想本地预览和执行该命令预览) </span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="NexT主题官方文档"><a href="#NexT主题官方文档" class="headerlink" title="NexT主题官方文档"></a>NexT主题官方文档</h2><p><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">http://theme-next.iissnan.com/getting-started.html</a></p>
<h1 id="添加tag"><a href="#添加tag" class="headerlink" title="添加tag"></a>添加<code>tag</code></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &quot;tags&quot;</span><br></pre></td></tr></table></figure>
<h1 id="博客的创建、修改与删除"><a href="#博客的创建、修改与删除" class="headerlink" title="博客的创建、修改与删除"></a>博客的创建、修改与删除</h1><ul>
<li><p>1、创建新博客</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;test_blog&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除博客<br>删除博客文件后重新发布更新即可<br>可能需要等几分钟才有效果</p>
</li>
<li><p>2、发布更新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure>
</li>
<li><p>3、一些快捷键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo g == hexo generate</span><br><span class="line">hexo d == hexo deploy</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo n == hexo new</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2015/08/12/iOS中的时间/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/08/12/iOS中的时间/" itemprop="url">
                  iOS中的时间
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2015-08-12 22:10:18" itemprop="dateCreated datePublished" datetime="2015-08-12T22:10:18+08:00">2015-08-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 16:12:16" itemprop="dateModified" datetime="2018-05-09T16:12:16+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2015/08/12/iOS中的时间/" class="leancloud_visitors" data-flag-title="iOS中的时间">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="设备开机后的时间"><a href="#设备开机后的时间" class="headerlink" title="设备开机后的时间"></a>设备开机后的时间</h1><ul>
<li><code>CACurrentMediaTime()</code></li>
</ul>
<p>设备从开机时起到现在的时间，设备重启会重置，单位为秒</p>
<ul>
<li><code>[[NSProcessInfo processInfo] systemUptime]</code> </li>
</ul>
<p>与<code>CACurrentMediaTime()</code>等价</p>
<h1 id="相对某个参考系的时间"><a href="#相对某个参考系的时间" class="headerlink" title="相对某个参考系的时间"></a>相对某个参考系的时间</h1><ul>
<li><code>Date().timeIntervalSince1970</code> </li>
</ul>
<p>1970年1月1日凌晨为参考系，到现在的时间，一般用于表示时间戳</p>
<p><br></p>
<ul>
<li><code>Date().timeIntervalSinceReferenceDate</code></li>
</ul>
<p>世界时间（UTC）2001年1月1日凌晨到现在经过的时间，单位为秒</p>
<p><br></p>
<ul>
<li><code>CFAbsoluteTimeGetCurrent()</code></li>
</ul>
<p>与<code>Date().timeIntervalSinceReferenceDate</code>等价</p>
<p><br></p>
<blockquote>
<p>当用户手动改变了设备上的系统时间后，基于系统时钟的上述方法返回的结果也会一同改变</p>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">CACurrentMediaTime</span>()) <span class="comment">// 设备刚重启</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Date</span>().timeIntervalSince1970)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">Date</span>().timeIntervalSinceReferenceDate)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="type">CFAbsoluteTimeGetCurrent</span>())</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/1120923-1bb36e607297d7c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<h1 id="必要时，从服务器上获取时间"><a href="#必要时，从服务器上获取时间" class="headerlink" title="必要时，从服务器上获取时间"></a>必要时，从服务器上获取时间</h1><p>如果App本身对获取的时间精度要求很高，还是直接通过网络从服务器获取时间戳会比较保险。</p>
<p>当网络可用时，直接从服务器获取；</p>
<p>网络不可用时，且设备没有被重启过，可以根据上一次获取服务器时间戳的时刻到此时的时间差来推算出正确的时间</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2014/09/03/cocoapods-安装与使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/09/03/cocoapods-安装与使用/" itemprop="url">
                  cocoapods 安装与使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2014-09-03 09:10:54" itemprop="dateCreated datePublished" datetime="2014-09-03T09:10:54+08:00">2014-09-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 18:26:28" itemprop="dateModified" datetime="2018-05-09T18:26:28+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2014/09/03/cocoapods-安装与使用/" class="leancloud_visitors" data-flag-title="cocoapods 安装与使用">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h1><h2 id="更新本地索引库"><a href="#更新本地索引库" class="headerlink" title="更新本地索引库"></a>更新本地索引库</h2><p>需要经常手动进行更新，尤其在苹果有大的版本发布之后，各个第三方库会在随后更新<br><code>pod repo update</code></p>
<h2 id="更新cocoapod版本"><a href="#更新cocoapod版本" class="headerlink" title="更新cocoapod版本"></a>更新cocoapod版本</h2><p><code>gem install cocoapods --pre</code></p>
<h2 id="单独更新某个库"><a href="#单独更新某个库" class="headerlink" title="单独更新某个库"></a>单独更新某个库</h2><p><code>pod update MJRefresh</code></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><hr>
<h2 id="1-安装-rvm"><a href="#1-安装-rvm" class="headerlink" title="1.安装 rvm"></a>1.安装 rvm</h2><p>参考：<a href="http://ruby-china.org/wiki/rvm-guide，测试可行" target="_blank" rel="noopener">http://ruby-china.org/wiki/rvm-guide，测试可行</a></p>
<h2 id="2-安装ruby"><a href="#2-安装ruby" class="headerlink" title="2.安装ruby"></a>2.安装ruby</h2><p>同样参考上面的网站</p>
<h2 id="3-开始安装cocoapods"><a href="#3-开始安装cocoapods" class="headerlink" title="3.开始安装cocoapods"></a>3.开始安装cocoapods</h2><p>升级ruby的gem<br><code>sudo gem update --system</code><br>安装cocoapods<br><code>sudo gem install cocoapods</code><br>还有一点需要注意，pod setup在执行时，会输出Setting up CocoaPods master repo，但是会等待比较久的时间。这步其实是 Cocoapods 在将它的信息下载到 ~/.cocoapods目录下，如果你等太久，可以试着 cd 到那个目录，用du -sh *来查看下载进度。</p>
<blockquote>
<p>请参见cocoapods官网 <a href="https://cocoapods.org" target="_blank" rel="noopener">https://cocoapods.org</a></p>
</blockquote>
<h2 id="4-更新ruby的源"><a href="#4-更新ruby的源" class="headerlink" title="4.更新ruby的源"></a>4.更新ruby的源</h2><blockquote>
<p>最新的国内安装源可以在这里看到 <a href="https://gems.ruby-china.org" target="_blank" rel="noopener">https://gems.ruby-china.org</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gem sources --remove https://rubygems.org/</span><br><span class="line">gem sources -a https://ruby.taobao.org/</span><br><span class="line">gem sources -l</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考唐巧博客：<a href="http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/" target="_blank" rel="noopener">http://blog.devtang.com/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/</a></p>
</blockquote>
<h2 id="二、重装"><a href="#二、重装" class="headerlink" title="二、重装"></a>二、重装</h2><hr>
<p>更新了 <code>Xcode 7</code> 和 <code>OSX 0.11.1</code> 后，<code>install pod</code> 不好使了。试了下重新安装 <code>cocoapods</code>。遇到了一些问题</p>
<h3 id="1-执行-sudo-gem-install-cocoapods-出现了如下错误："><a href="#1-执行-sudo-gem-install-cocoapods-出现了如下错误：" class="headerlink" title="1. 执行 sudo gem install cocoapods 出现了如下错误："></a>1. 执行 <code>sudo gem install cocoapods</code> 出现了如下错误：</h3><blockquote>
<p>ERROR:  Could not find a valid gem ‘cocospods’ (&gt;= 0), here is why:<br>Unable to download data from <a href="http://ruby.taobao.org/" target="_blank" rel="noopener">http://ruby.taobao.org/</a> - bad response Not Found 404 (<a href="http://ruby.taobao.org/latest_specs.4.8.gz" target="_blank" rel="noopener">http://ruby.taobao.org/latest_specs.4.8.gz</a>)</p>
</blockquote>
<h3 id="解决办法：将http-替换成-https，具体如下"><a href="#解决办法：将http-替换成-https，具体如下" class="headerlink" title="解决办法：将http 替换成 https，具体如下"></a>解决办法：将http 替换成 https，具体如下</h3><ol>
<li>gem sources –remove <a href="http://ruby.taobao.org/" target="_blank" rel="noopener">http://ruby.taobao.org/</a></li>
<li>gem sources -a <a href="https://ruby.taobao.org/" target="_blank" rel="noopener">https://ruby.taobao.org/</a></li>
<li>查看源对不对<br>gem sources -l</li>
<li>再安装就好了<br>sudo gem install cocoapods</li>
</ol>
<h3 id="2-然后可以执行-sudo-gem-install-cocoapods-了。但是执行到一半又出现了如下错误"><a href="#2-然后可以执行-sudo-gem-install-cocoapods-了。但是执行到一半又出现了如下错误" class="headerlink" title="2. 然后可以执行 sudo gem install cocoapods 了。但是执行到一半又出现了如下错误"></a>2. 然后可以执行 <code>sudo gem install cocoapods</code> 了。但是执行到一半又出现了如下错误</h3><blockquote>
<p>While executing gem … (Errno::EPERM)<br>Operation not permitted - /usr/bin/xcodeproj</p>
</blockquote>
<h3 id="解决办法：自定义GEM-HOME"><a href="#解决办法：自定义GEM-HOME" class="headerlink" title="解决办法：自定义GEM_HOME"></a>解决办法：自定义GEM_HOME</h3><p>命令行操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p $HOME/Software/ruby</span><br><span class="line">$ export GEM_HOME=$HOME/Software/ruby</span><br><span class="line">$ gem install cocoapods</span><br><span class="line">　　[...]</span><br><span class="line">　　1 gem installed</span><br><span class="line">　　$ export PATH=$PATH:$HOME/Sofware/ruby/bin</span><br><span class="line">　　$ pod --version</span><br><span class="line">　　0.39.0</span><br></pre></td></tr></table></figure></p>
<p>　　<br>　　然后就顺利安装成功了<br>　　<br>　　## 三、使用 cocoapods<br>　　<br>　　<figure class="highlight plain"><figcaption><span>更换clone github镜像，加快 pod 代码下载速度~~~</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">　　</span><br><span class="line">　　```</span><br><span class="line">　　$ cd ~/.cocoapods/repos </span><br><span class="line">　　$ pod repo remove master</span><br><span class="line">　　$ git clone https://git.coding.net/hging/Specs.git master</span><br><span class="line">　　</span><br><span class="line">　　```</span><br><span class="line">　　</span><br><span class="line">　　~~~然后需要在 podfile文件中加入如下代码</span><br></pre></td></tr></table></figure></p>
<p>　　<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">　　// 如果不加这一句话，它默认还是从github镜像源地址去下载的</span><br><span class="line">　　source &apos;https://git.coding.net/hging/Specs.git&apos;</span><br></pre></td></tr></table></figure></p>
<p>　　<br>　　<br><br>　　<br>　　<font color="#0099ff" face="黑体">目前没有发现比较好的镜像，上面的镜像pod里库的版本已经很低，不建议使用了，所以暂时无法解决慢的问题。</font><br>　　—-<br>　　<br>　　### 常用命令<br>　　<code>pod search pop</code><br>　　<code>pod init</code><br>　　<code>pod install</code><br>　　<code>pod install --verbose --no-repo-update</code><br>　　<code>pod update</code><br>　　<code>pod update --verbose --no-repo-update</code><br>　　<br>　　### 注意点<br>　　* 如果 import 的时候没有提示 <code>POP.h</code> 的文件，可以在 <code>target-Build Settings</code> 下修改 <code>User Header Search Paths</code> 项，新增 <code>${SRCROOT}</code> 并选择 <code>rcursive</code>，如下图。<br>　　<br>　　<br>　　## 四、参考：<br>　　<a href="http://www.bubuko.com/infodetail-1136466.html" target="_blank" rel="noopener">安装Cocoapods， 更新gem出现的问题</a><br>　　<a href="http://blog.csdn.net/w_x_p/article/details/49151477" target="_blank" rel="noopener">Mac OS X 跟新到10.11后cocoapods安装出现的问题（- bad response Not Found 404 (http://ruby.taobao.org/latest_spe</a><br>　　<a href="http://ryantang.me/blog/2014/01/05/cocoapods/" target="_blank" rel="noopener">使用CocoaPods管理依赖库</a><br>　　<a href="https://www.cnblogs.com/dengchaojie/p/8232555.html" target="_blank" rel="noopener">解决CocoaPods慢的小技巧</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://liumengxia.shop/2013/07/15/《C语言深度剖析》读书笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="superkk">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/img/default_avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="superkk">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2013/07/15/《C语言深度剖析》读书笔记/" itemprop="url">
                  《C语言深度剖析》读书笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2013-07-15 14:19:07" itemprop="dateCreated datePublished" datetime="2013-07-15T14:19:07+08:00">2013-07-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-05-09 18:20:02" itemprop="dateModified" datetime="2018-05-09T18:20:02+08:00">2018-05-09</time>
              
            
          </span>

          

          
            
          

          
          
             <span id="/2013/07/15/《C语言深度剖析》读书笔记/" class="leancloud_visitors" data-flag-title="《C语言深度剖析》读书笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="register"><a href="#register" class="headerlink" title="register"></a><code>register</code></h1><p>register 变量必须是一个单个的值,并且其长度应小 于或等于整型的长度。 而且 register 变量可能不存放在内存中,所以不能用取址运算符“&amp;” 来获取 register 变量的地址。</p>
<h1 id="float-变量与“零值”进行比较"><a href="#float-变量与“零值”进行比较" class="headerlink" title="float 变量与“零值”进行比较"></a><code>float</code> 变量与“零值”进行比较</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//EPSINON 为定义好的 精度。</span><br><span class="line">if((fTestVal &gt;= -EPSINON) &amp;&amp; (fTestVal &lt;= EPSINON));</span><br></pre></td></tr></table></figure>
<h1 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a><code>volatile</code></h1><p>volatile 关键字告诉编译器 i 是随时可能发生变化的,每次使用它的时候必须从内存中取出 i 的值,因而编译器生成的汇编代码会重新从 i 的地址处读取数据放在 k 中。</p>
<p>这样看来,如果 i 是一个寄存器变量或者表示一个端口数据或者是多个线程的共享数 据,就容易出错,所以说 volatile 可以保证对特殊地址的稳定访问。</p>
<h1 id="extern"><a href="#extern" class="headerlink" title="extern"></a><code>extern</code></h1><p>extern 可以置于变量或者函数前,以 标示变量或者函数的定义在别的文件中,下面的代码用到的这些变量或函数是外来的,不 是本文件定义的,提示编译器遇到此变量和函数时在其他模块中寻找其定义</p>
<h1 id="空结构体占用空间大小"><a href="#空结构体占用空间大小" class="headerlink" title="空结构体占用空间大小"></a>空结构体占用空间大小</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">struct student &#123;</span><br><span class="line"></span><br><span class="line">&#125;stu;</span><br></pre></td></tr></table></figure>
<h1 id="sizeof-stu-的值是多少呢"><a href="#sizeof-stu-的值是多少呢" class="headerlink" title="sizeof(stu)的值是多少呢?"></a><code>sizeof(stu)</code>的值是多少呢?</h1><p>Visual C++ 6.0上为 1<br>编译器认为你构造一个结构体数据类型是用来打包一些数据成员的,而最小的数据成员需要 1 个 byte,编译器为每个结构体类型数据至少预留 1 个 byte 的空间。所以,空结构体的大小就定位 1 个 byte。</p>
<h1 id="struct-与-class-的区别"><a href="#struct-与-class-的区别" class="headerlink" title="struct 与 class 的区别"></a>struct 与 class 的区别</h1><p>struct 的成 员默认情况下属性是 public 的,而 class 成员却是 private 的。</p>
<h1 id="union-关键字"><a href="#union-关键字" class="headerlink" title="union 关键字"></a>union 关键字</h1><p>union 维护足够的空间来置放多个数据成员中的“一种”,而不是为每一个数据成员配置 空间,在 union 中所有的数据成员共用一个空间,同一时间只能储存其中一个数据成员,所 有的数据成员具有相同的起始地址。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">union StateMachine &#123;</span><br><span class="line">char character;</span><br><span class="line">int number;</span><br><span class="line">char *str;</span><br><span class="line">double exp;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>一个 union 只配置一个足够大的空间以来容纳最大长度的数据成员,以上例而言,最大 长度是 double 型态,所以 StateMachine 的空间大小就是 double 数据类型的大小。<br>另外，注意大小端模式对 union 类型数据存储的空间有影响</p>
<h1 id="typedef-关键字"><a href="#typedef-关键字" class="headerlink" title="typedef 关键字"></a><code>typedef</code> 关键字</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">typedef struct student &#123;</span><br><span class="line"></span><br><span class="line">//code</span><br><span class="line">&#125;Stu_st,*Stu_pst;</span><br><span class="line">A),struct student stu1;和 Stu_st stu1;没有区别。</span><br><span class="line">B),struct student *stu2;和 Stu_pst stu2;和 Stu_st *stu2;没有区别。 这个地方很多初学者迷惑,B)的两个定义为什么相等呢?其实很好</span><br><span class="line"></span><br><span class="line">const</span><br><span class="line">const  int *p;      //p指向的对象不可变（*p不可变）</span><br><span class="line">int const *p;     //p指向的对象不可变（*p不可变）</span><br><span class="line">int *const p;     //p不可变，p指向的对象可变</span><br><span class="line">const int *const p; //前一个 const 修饰*p,后一个 const 修饰 p,指针 p 和 p 指向的对象 都不可变</span><br><span class="line"></span><br><span class="line">void Fun(const int i);     //不希望这个参数值被函数体内意外改变。</span><br><span class="line">const int Fun (void);     //返回值不可被改变。</span><br></pre></td></tr></table></figure>
<h1 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQR(8)</span><br></pre></td></tr></table></figure>
<p>输出的是:<br>The square of 8 is 64.</p>
<p>#预算符</p>
<p>##运算符可以用于宏函数的替换部分。这个运算符把两个语言符号组 合成单个语言符号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#define XNAME(n) x ## n</span><br></pre></td></tr></table></figure></p>
<p>如果这样使用宏:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XNAME(8)</span><br></pre></td></tr></table></figure></p>
<p>则会被展开成这样:<br>x8</p>
<h1 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h1><p>A)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int* p1[10];     // 指针数组，数组的每个值都是指针</span><br></pre></td></tr></table></figure></p>
<p>“[]”的优先级比“<em>”要高。p1 先与“[]”结合,构成一个数组的定义,数组名为 p1,int </em> 修饰的是数组的内容,即数组的每个元素。那现在我们清楚,这是一个数组,其包含 10 个 指向 int 类型数据的指针,即指针数组。<br>B)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">int  (*p2)[10];     //数组指针，可以理解为 int (*)[10] p2，实际上就是二维数组p[][10];</span><br></pre></td></tr></table></figure></p>
<p>“()”的优先级比 “[]”高,“*”号和 p2 构成一个指针的定义，指针变量名为 p2,int 修饰的是数组的内容, 即数组的每个元素。数组在这里并没有名字,是个匿名数组。那现在我们清楚 p2 是一个指 针,它指向一个包含 10 个 int 类型数据的数组,即数组指针。</p>
<h1 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h1><p>A)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char * fun3(char * p1,char * p2);     //fun3是函数名,p1,p2是参数,其类型为char*型,函数的返回值为char * 类型。</span><br></pre></td></tr></table></figure></p>
<p>B)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char * *fun2(char * p1,char * p2);     //与 C)表达式相比,唯一不同的就是函数的返回值类型为 char**</span><br></pre></td></tr></table></figure></p>
<p>C)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char * (*fun1)(char * p1,char * p2);     //fun1 不是什么函数名,而是一个 指针变量,它指向一个函数。这个函数有两个指针类型的参数,函数的返回值也是一个指 针。我们把这个表达式改写一下:char * (*)(char * p1,char * p2) fun1; 这样子是不 是好看一些呢?只可惜编译器不这么想。</span><br></pre></td></tr></table></figure></p>
<h1 id="函数指针数组"><a href="#函数指针数组" class="headerlink" title="函数指针数组"></a>函数指针数组</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">char * (*pf)(char * p)     //函数指针</span><br><span class="line">char * (*pf[3])(char * p);     //这是定义一个函数指针数组。它是一个数组,数组名为 pf,数组内存储了 3 个指向函数的 指针。pf是数组名</span><br></pre></td></tr></table></figure>
<h1 id="函数指针数组的指针"><a href="#函数指针数组的指针" class="headerlink" title="函数指针数组的指针"></a>函数指针数组的指针</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char * (*(*pf)[3])(char * p);     //pf是指针，这个指针指向一个包含了 3 个元素的数组;这个数字里 面存的是指向函数的指针;这些指针指向一些返回值类型为指向字符的指针、参数为一个 指向字符的指针的函数。</span><br></pre></td></tr></table></figure>
<h1 id="实战练习"><a href="#实战练习" class="headerlink" title="实战练习"></a>实战练习</h1><p><img src="https://upload-images.jianshu.io/upload_images/1120923-fd9888f4fcd773b3.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=" "></p>
<ul>
<li>参考答案：<br>a) int a;<br>b) int <em>a;<br>c) int **a;<br>d) int a[10];<br>e) int </em> a[10];<br>f) int (<em>a)[10];<br>g) int (</em>func)(int a);<br>h) int (*func[10])(int a);</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/img/default_avatar.jpg"
                alt="superkk" />
            
              <p class="site-author-name" itemprop="name">superkk</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">2</span>
                    <span class="site-state-item-name">tags</span>
                  
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/action456789" target="_blank" title="GitHub"><i class="fa fa-fw fa-globe"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.jianshu.com/u/7966a93b66ce" target="_blank" title="jianshu"><i class="fa fa-fw fa-globe"></i>jianshu</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">superkk</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.2.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.2.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.2.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.2.0"></script>



  



	





  





  










  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("FWMDfS9Bw5wt2Q1HeXOvmu4I-gzGzoHsz", "FhgGym8sAYePRhceG5LP3jcl");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
            counter.save(null, {
              success: function(counter) {
                
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.get('time'));
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
  

  

  

  

  

  

</body>
</html>
